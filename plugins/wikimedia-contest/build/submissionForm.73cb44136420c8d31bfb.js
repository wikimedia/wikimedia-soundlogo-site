(()=>{var e={111:(e,a,t)=>{"use strict";t.r(a);const s=jQuery;var n=t.n(s);const i=wp.a11y,o=wp.i18n,r=new AudioContext,l=["audio/mpeg","video/ogg","audio/x-wav"],u=document.querySelector('input[type="file"]'),p=(e,a)=>{const t=d(e),s=a.map((e=>{let{error:a}=e;return a})).includes(!0),n=a.map((e=>{let{message:a}=e;return a}));t[0].innerHTML="<ul>"+a.reduce(((e,a)=>{let{error:t,message:s}=a;return`${e}<li class="${t?"error":"warning"}">${s}</li>`}),"")+"</ul>",(0,i.speak)(n.join(", ")),e.setCustomValidity(s?n.join(", "):""),e.reportValidity()},d=e=>n()(e).closest("div").siblings(".validation_message").length>0?n()(e).closest("div").siblings(".validation_message"):n()(e).siblings(".validation_message").length>0?n()(e).siblings(".validation_message"):n()('<div class="validation_message"></div>').insertAfter(e),m=async e=>{let{target:a}=e;const t=a.files[0],s=[],{name:n,size:i,type:u}=t;if(l.includes(u)||s.push({error:!0,message:(0,o.__)("File must be one of the allowed types: MP3, OGG, or WAV.","wikimedia-contest")}),i>1e8&&s.push({error:!0,message:(0,o.__)("File must be less than 100MB.","wikimedia-contest")}),s.length)return void p(a,s);const d=await t.arrayBuffer();try{const e=await r.decodeAudioData(d),{sampleRate:t,numberOfChannels:l,duration:p}=e;p>10?s.push({error:!0,message:(0,o.__)("Sound must be less than 10s.","wikimedia-contest")}):p<1?s.push({error:!0,message:(0,o.__)("Sound must be at least 1s.","wikimedia-contest")}):p>4&&s.push({error:!1,message:(0,o.__)("Sound should be less than 4s.","wikimedia-contest")});const m=32*t;"audio/mp3"===u&&m<196608?s.push({error:!1,message:(0,o.__)("MP3 files should be at least 192kbps.","wikimedia-contest")}):"video/ogg"===u&&m<163840&&s.push({error:!1,message:(0,o.__)("OGG files should be at least 160kbps.","wikimedia-contest")}),a.soundMeta={name:n,type:u,size:i,sampleRate:t,numberOfChannels:l,duration:p}}catch{s.push({error:!0,message:(0,o.__)("Audio file is not readable.","wikimedia-contest")})}p(a,s)};document.addEventListener("DOMContentLoaded",(()=>{u&&u.addEventListener("change",m)}))},947:()=>{jQuery(document).ready((function(e){e("#submission-form").on("submit",(function(a){a.preventDefault();let t=e(this),s=new FormData;s.append("wiki_username",t.prop("wiki_username").value),s.append("legal_name",t.prop("legal_name").value),s.append("date_birth",t.prop("date_birth").value),s.append("participant_email",t.prop("participant_email").value),s.append("phone_number",t.prop("phone_number").value),s.append("authors_contributed",t.prop("authors_contributed").value),s.append("explanation_creation",t.prop("explanation_creation").value),s.append("explanation_inspiration",t.prop("explanation_inspiration").value);let n=t.prop("_submissionnonce").value;s.append("_submissionnonce",n);let i=submission_form_ajax_object.files_upload_nonce;s.append("_filesuploadnonce",i);let o=t.prop("audio_file").files[0];o&&(s.append("audio_file",o),s.append("audio_file_meta",JSON.stringify(t[0].querySelector('[type="file"]').soundMeta)));let r=submission_form_ajax_object.api_url,l=t.attr("method");e.ajax({url:r,type:l,data:s,contentType:!1,processData:!1,xhrFields:{withCredentials:!0},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",n)},success:function(a){a.success&&t.hide(),e("#submission_return_message").html(a.data.message)}})}))}))}},a={};function t(s){var n=a[s];if(void 0!==n)return n.exports;var i=a[s]={exports:{}};return e[s](i,i.exports,t),i.exports}t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a:a}),a},t.d=(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t(111),t(947)})();