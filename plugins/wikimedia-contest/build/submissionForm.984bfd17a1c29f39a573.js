(()=>{var e={111:(e,t,s)=>{"use strict";s.r(t);const i=jQuery;var a=s.n(i);const o=wp.a11y,r=wp.i18n,n=new AudioContext,l=["audio/mpeg","video/ogg","audio/x-wav"],d=document.querySelector('input[type="file"]'),u=(e,t)=>{const s=m(e),i=t.map((e=>{let{error:t}=e;return t})).includes(!0),a=t.map((e=>{let{message:t}=e;return t}));s[0].innerHTML="<ul>"+t.reduce(((e,t)=>{let{error:s,message:i}=t;return`${e}<li class="${s?"error":"warning"}">${i}</li>`}),"")+"</ul>",(0,o.speak)(a.join(", ")),e.setCustomValidity(i?a.join(", "):""),e.reportValidity()},m=e=>a()(e).closest("div").siblings(".validation_message").length>0?a()(e).closest("div").siblings(".validation_message"):a()(e).siblings(".validation_message").length>0?a()(e).siblings(".validation_message"):a()('<div class="validation_message"></div>').insertAfter(e),c=async e=>{let{target:t}=e;const s=t.files[0],i=[],{name:a,size:o,type:d}=s;if(l.includes(d)||i.push({error:!0,message:(0,r.__)("File must be one of the allowed types: MP3, OGG, or WAV.","wikimedia-contest")}),o>1e8&&i.push({error:!0,message:(0,r.__)("File must be less than 100MB.","wikimedia-contest")}),i.length)return void u(t,i);const m=await s.arrayBuffer();try{const e=await n.decodeAudioData(m),{sampleRate:t,numberOfChannels:s,duration:l}=e;l>10?i.push({error:!0,message:(0,r.__)("Sound must be less than 10s.","wikimedia-contest")}):l<1?i.push({error:!0,message:(0,r.__)("Sound must be at least 1s.","wikimedia-contest")}):l>4&&i.push({error:!1,message:(0,r.__)("Sound should be less than 4s.","wikimedia-contest")});const u=32*t;"audio/mp3"===d&&u<196608?i.push({error:!1,message:(0,r.__)("MP3 files should be at least 192kbps.","wikimedia-contest")}):"video/ogg"===d&&u<163840&&i.push({error:!1,message:(0,r.__)("OGG files should be at least 160kbps.","wikimedia-contest")});const c=document.getElementById(window.audioFileMetaField);c&&(c.value=JSON.stringify({name:a,type:d,size:o,sampleRate:t,numberOfChannels:s,duration:l}))}catch(c){console.error(c),i.push({error:!0,message:(0,r.__)("Audio file is not readable.","wikimedia-contest")})}u(t,i)};document.addEventListener("DOMContentLoaded",(()=>{d&&d.addEventListener("change",c)}))}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(111)})();