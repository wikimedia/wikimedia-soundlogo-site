"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = BlockSupportToolsPanel;

var _element = require("@wordpress/element");

var _components = require("@wordpress/components");

var _data = require("@wordpress/data");

var _store = require("../../store");

var _utils = require("../../hooks/utils");

/**
 * WordPress dependencies
 */

/**
 * Internal dependencies
 */
function BlockSupportToolsPanel({
  children,
  label,
  header
}) {
  const {
    clientId,
    attributes
  } = (0, _data.useSelect)(select => {
    const {
      getBlockAttributes,
      getSelectedBlockClientId
    } = select(_store.store);
    const selectedBlockClientId = getSelectedBlockClientId();
    return {
      clientId: selectedBlockClientId,
      attributes: getBlockAttributes(selectedBlockClientId)
    };
  }, []);
  const {
    updateBlockAttributes
  } = (0, _data.useDispatch)(_store.store);

  const resetAll = (resetFilters = []) => {
    const {
      style
    } = attributes;
    let newAttributes = {
      style
    };
    resetFilters.forEach(resetFilter => {
      newAttributes = { ...newAttributes,
        ...resetFilter(newAttributes)
      };
    }); // Enforce a cleaned style object.

    newAttributes = { ...newAttributes,
      style: (0, _utils.cleanEmptyObject)(newAttributes.style)
    };
    updateBlockAttributes(clientId, newAttributes);
  };

  return (0, _element.createElement)(_components.__experimentalToolsPanel, {
    label: label,
    header: header,
    resetAll: resetAll,
    key: clientId,
    panelId: clientId
  }, children);
}
//# sourceMappingURL=block-support-tools-panel.js.map