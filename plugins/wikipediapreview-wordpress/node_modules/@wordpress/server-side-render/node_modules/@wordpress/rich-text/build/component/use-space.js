"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useSpace = useSpace;

var _compose = require("@wordpress/compose");

var _keycodes = require("@wordpress/keycodes");

/**
 * WordPress dependencies
 */

/**
 * For some elements like BUTTON and SUMMARY, the space key doesn't insert a
 * space character in some browsers even though the element is editable. We have
 * to manually insert a space and prevent default behaviour.
 *
 * DO NOT limit this behaviour to specific tag names! It would mean that this
 * behaviour is not widely tested. If there's ever any problems, we should find
 * a different solution entirely or remove it entirely.
 */
function useSpace() {
  return (0, _compose.useRefEffect)(element => {
    function onKeyDown(event) {
      // Don't insert a space if default behaviour is prevented.
      if (event.defaultPrevented) {
        return;
      }

      const {
        keyCode,
        altKey,
        metaKey,
        ctrlKey
      } = event; // Only consider the space key without modifiers pressed.

      if (keyCode !== _keycodes.SPACE || altKey || metaKey || ctrlKey) {
        return;
      }

      event.target.ownerDocument.execCommand('insertText', false, ' ');
      event.preventDefault();
    }

    element.addEventListener('keydown', onKeyDown);
    return () => {
      element.removeEventListener('keydown', onKeyDown);
    };
  }, []);
}
//# sourceMappingURL=use-space.js.map