{"version":3,"sources":["@wordpress/edit-post/src/components/block-manager/index.js"],"names":["filter","includes","isArray","store","blocksStore","withSelect","SearchControl","__","_n","sprintf","useState","BlockManagerCategory","editPostStore","BlockManager","blockTypes","categories","hasBlockSupport","isMatchingSearchTerm","numberOfHiddenBlocks","search","setSearch","blockType","parent","nextSearch","length","map","category","slug","title","select","getBlockTypes","getCategories","getPreference","hiddenBlockTypes"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,MAAT,EAAiBC,QAAjB,EAA2BC,OAA3B,QAA0C,QAA1C;AAEA;AACA;AACA;;AACA,SAASC,KAAK,IAAIC,WAAlB,QAAqC,mBAArC;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,EAAT,EAAaC,EAAb,EAAiBC,OAAjB,QAAgC,iBAAhC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA;AACA;AACA;;AACA,OAAOC,oBAAP,MAAiC,YAAjC;AACA,SAASR,KAAK,IAAIS,aAAlB,QAAuC,aAAvC;;AAEA,SAASC,YAAT,CAAuB;AACtBC,EAAAA,UADsB;AAEtBC,EAAAA,UAFsB;AAGtBC,EAAAA,eAHsB;AAItBC,EAAAA,oBAJsB;AAKtBC,EAAAA;AALsB,CAAvB,EAMI;AACH,QAAM,CAAEC,MAAF,EAAUC,SAAV,IAAwBV,QAAQ,CAAE,EAAF,CAAtC,CADG,CAGH;AACA;AACA;;AACAI,EAAAA,UAAU,GAAGA,UAAU,CAACd,MAAX,CACVqB,SAAF,IACCL,eAAe,CAAEK,SAAF,EAAa,UAAb,EAAyB,IAAzB,CAAf,KACE,CAAEF,MAAF,IAAYF,oBAAoB,CAAEI,SAAF,EAAaF,MAAb,CADlC,MAEE,CAAEE,SAAS,CAACC,MAAZ,IACDrB,QAAQ,CAAEoB,SAAS,CAACC,MAAZ,EAAoB,mBAApB,CAHT,CAFW,CAAb;AAQA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACG,CAAC,CAAEJ,oBAAH,IACD;AAAK,IAAA,SAAS,EAAC;AAAf,KACGT,OAAO;AACR;AACAD,EAAAA,EAAE,CACD,qBADC,EAED,uBAFC,EAGDU,oBAHC,CAFM,EAORA,oBAPQ,CADV,CAFF,EAcC,cAAC,aAAD;AACC,IAAA,KAAK,EAAGX,EAAE,CAAE,oBAAF,CADX;AAEC,IAAA,WAAW,EAAGA,EAAE,CAAE,oBAAF,CAFjB;AAGC,IAAA,KAAK,EAAGY,MAHT;AAIC,IAAA,QAAQ,EAAKI,UAAF,IAAkBH,SAAS,CAAEG,UAAF,CAJvC;AAKC,IAAA,SAAS,EAAC;AALX,IAdD,EAqBC;AACC,IAAA,QAAQ,EAAC,GADV;AAEC,IAAA,IAAI,EAAC,QAFN;AAGC,kBAAahB,EAAE,CAAE,uBAAF,CAHhB;AAIC,IAAA,SAAS,EAAC;AAJX,KAMGO,UAAU,CAACU,MAAX,KAAsB,CAAtB,IACD;AAAG,IAAA,SAAS,EAAC;AAAb,KACGjB,EAAE,CAAE,kBAAF,CADL,CAPF,EAWGQ,UAAU,CAACU,GAAX,CAAkBC,QAAF,IACjB,cAAC,oBAAD;AACC,IAAA,GAAG,EAAGA,QAAQ,CAACC,IADhB;AAEC,IAAA,KAAK,EAAGD,QAAQ,CAACE,KAFlB;AAGC,IAAA,UAAU,EAAG5B,MAAM,CAAEc,UAAF,EAAc;AAChCY,MAAAA,QAAQ,EAAEA,QAAQ,CAACC;AADa,KAAd;AAHpB,IADC,CAXH,EAoBC,cAAC,oBAAD;AACC,IAAA,KAAK,EAAGpB,EAAE,CAAE,eAAF,CADX;AAEC,IAAA,UAAU,EAAGP,MAAM,CAClBc,UADkB,EAElB,CAAE;AAAEY,MAAAA;AAAF,KAAF,KAAoB,CAAEA,QAFJ;AAFpB,IApBD,CArBD,CADD;AAoDA;;AAED,eAAerB,UAAU,CAAIwB,MAAF,IAAc;AACxC,QAAM;AACLC,IAAAA,aADK;AAELC,IAAAA,aAFK;AAGLf,IAAAA,eAHK;AAILC,IAAAA;AAJK,MAKFY,MAAM,CAAEzB,WAAF,CALV;AAMA,QAAM;AAAE4B,IAAAA;AAAF,MAAoBH,MAAM,CAAEjB,aAAF,CAAhC;AACA,QAAMqB,gBAAgB,GAAGD,aAAa,CAAE,kBAAF,CAAtC;AACA,QAAMd,oBAAoB,GACzBhB,OAAO,CAAE+B,gBAAF,CAAP,IAA+BA,gBAAgB,CAACT,MADjD;AAGA,SAAO;AACNV,IAAAA,UAAU,EAAEgB,aAAa,EADnB;AAENf,IAAAA,UAAU,EAAEgB,aAAa,EAFnB;AAGNf,IAAAA,eAHM;AAINC,IAAAA,oBAJM;AAKNC,IAAAA;AALM,GAAP;AAOA,CAnBwB,CAAV,CAmBVL,YAnBU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { filter, includes, isArray } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { withSelect } from '@wordpress/data';\nimport { SearchControl } from '@wordpress/components';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockManagerCategory from './category';\nimport { store as editPostStore } from '../../store';\n\nfunction BlockManager( {\n\tblockTypes,\n\tcategories,\n\thasBlockSupport,\n\tisMatchingSearchTerm,\n\tnumberOfHiddenBlocks,\n} ) {\n\tconst [ search, setSearch ] = useState( '' );\n\n\t// Filtering occurs here (as opposed to `withSelect`) to avoid\n\t// wasted renders by consequence of `Array#filter` producing\n\t// a new value reference on each call.\n\tblockTypes = blockTypes.filter(\n\t\t( blockType ) =>\n\t\t\thasBlockSupport( blockType, 'inserter', true ) &&\n\t\t\t( ! search || isMatchingSearchTerm( blockType, search ) ) &&\n\t\t\t( ! blockType.parent ||\n\t\t\t\tincludes( blockType.parent, 'core/post-content' ) )\n\t);\n\n\treturn (\n\t\t<div className=\"edit-post-block-manager__content\">\n\t\t\t{ !! numberOfHiddenBlocks && (\n\t\t\t\t<div className=\"edit-post-block-manager__disabled-blocks-count\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t'%d block is hidden.',\n\t\t\t\t\t\t\t'%d blocks are hidden.',\n\t\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<SearchControl\n\t\t\t\tlabel={ __( 'Search for a block' ) }\n\t\t\t\tplaceholder={ __( 'Search for a block' ) }\n\t\t\t\tvalue={ search }\n\t\t\t\tonChange={ ( nextSearch ) => setSearch( nextSearch ) }\n\t\t\t\tclassName=\"edit-post-block-manager__search\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\tclassName=\"edit-post-block-manager__results\"\n\t\t\t>\n\t\t\t\t{ blockTypes.length === 0 && (\n\t\t\t\t\t<p className=\"edit-post-block-manager__no-results\">\n\t\t\t\t\t\t{ __( 'No blocks found.' ) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<BlockManagerCategory\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\tblockTypes={ filter( blockTypes, {\n\t\t\t\t\t\t\tcategory: category.slug,\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t<BlockManagerCategory\n\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t\tblockTypes={ filter(\n\t\t\t\t\t\tblockTypes,\n\t\t\t\t\t\t( { category } ) => ! category\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default withSelect( ( select ) => {\n\tconst {\n\t\tgetBlockTypes,\n\t\tgetCategories,\n\t\thasBlockSupport,\n\t\tisMatchingSearchTerm,\n\t} = select( blocksStore );\n\tconst { getPreference } = select( editPostStore );\n\tconst hiddenBlockTypes = getPreference( 'hiddenBlockTypes' );\n\tconst numberOfHiddenBlocks =\n\t\tisArray( hiddenBlockTypes ) && hiddenBlockTypes.length;\n\n\treturn {\n\t\tblockTypes: getBlockTypes(),\n\t\tcategories: getCategories(),\n\t\thasBlockSupport,\n\t\tisMatchingSearchTerm,\n\t\tnumberOfHiddenBlocks,\n\t};\n} )( BlockManager );\n"]}