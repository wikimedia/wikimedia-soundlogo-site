{"version":3,"sources":["@wordpress/edit-post/src/components/meta-boxes/index.js"],"names":["map","useSelect","useRegistry","useEffect","store","editorStore","MetaBoxesArea","MetaBoxVisibility","editPostStore","MetaBoxes","location","registry","metaBoxes","isVisible","areMetaBoxesInitialized","isEditorReady","select","__unstableIsEditorReady","isMetaBoxLocationVisible","getMetaBoxesPerLocation","_areMetaBoxesInitialized","dispatch","initializeMetaBoxes","id"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,GAAT,QAAoB,QAApB;AAEA;AACA;AACA;;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,iBAAvC;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,KAAK,IAAIC,WAAlB,QAAqC,mBAArC;AAEA;AACA;AACA;;AACA,OAAOC,aAAP,MAA0B,mBAA1B;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,SAASH,KAAK,IAAII,aAAlB,QAAuC,aAAvC;AAEA,eAAe,SAASC,SAAT,CAAoB;AAAEC,EAAAA;AAAF,CAApB,EAAmC;AACjD,QAAMC,QAAQ,GAAGT,WAAW,EAA5B;AACA,QAAM;AACLU,IAAAA,SADK;AAELC,IAAAA,SAFK;AAGLC,IAAAA,uBAHK;AAILC,IAAAA;AAJK,MAKFd,SAAS,CACVe,MAAF,IAAc;AACb,UAAM;AAAEC,MAAAA;AAAF,QAA8BD,MAAM,CAAEX,WAAF,CAA1C;AACA,UAAM;AACLa,MAAAA,wBADK;AAELC,MAAAA,uBAFK;AAGLL,MAAAA,uBAAuB,EAAEM;AAHpB,QAIFJ,MAAM,CAAER,aAAF,CAJV;AAKA,WAAO;AACNI,MAAAA,SAAS,EAAEO,uBAAuB,CAAET,QAAF,CAD5B;AAENG,MAAAA,SAAS,EAAEK,wBAAwB,CAAER,QAAF,CAF7B;AAGNI,MAAAA,uBAAuB,EAAEM,wBAAwB,EAH3C;AAINL,MAAAA,aAAa,EAAEE,uBAAuB;AAJhC,KAAP;AAMA,GAdW,EAeZ,CAAEP,QAAF,CAfY,CALb,CAFiD,CAyBjD;AACA;AACA;;AACAP,EAAAA,SAAS,CAAE,MAAM;AAChB,QAAKY,aAAa,IAAI,CAAED,uBAAxB,EAAkD;AACjDH,MAAAA,QAAQ,CAACU,QAAT,CAAmBb,aAAnB,EAAmCc,mBAAnC;AACA;AACD,GAJQ,EAIN,CAAEP,aAAF,EAAiBD,uBAAjB,CAJM,CAAT;;AAMA,MAAK,CAAEA,uBAAP,EAAiC;AAChC,WAAO,IAAP;AACA;;AAED,SACC,8BACGd,GAAG,CAAEY,SAAF,EAAa,CAAE;AAAEW,IAAAA;AAAF,GAAF,KACjB,cAAC,iBAAD;AAAmB,IAAA,GAAG,EAAGA,EAAzB;AAA8B,IAAA,EAAE,EAAGA;AAAnC,IADI,CADN,EAIGV,SAAS,IAAI,cAAC,aAAD;AAAe,IAAA,QAAQ,EAAGH;AAA1B,IAJhB,CADD;AAQA","sourcesContent":["/**\n * External dependencies\n */\nimport { map } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect, useRegistry } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * Internal dependencies\n */\nimport MetaBoxesArea from './meta-boxes-area';\nimport MetaBoxVisibility from './meta-box-visibility';\nimport { store as editPostStore } from '../../store';\n\nexport default function MetaBoxes( { location } ) {\n\tconst registry = useRegistry();\n\tconst {\n\t\tmetaBoxes,\n\t\tisVisible,\n\t\tareMetaBoxesInitialized,\n\t\tisEditorReady,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst { __unstableIsEditorReady } = select( editorStore );\n\t\t\tconst {\n\t\t\t\tisMetaBoxLocationVisible,\n\t\t\t\tgetMetaBoxesPerLocation,\n\t\t\t\tareMetaBoxesInitialized: _areMetaBoxesInitialized,\n\t\t\t} = select( editPostStore );\n\t\t\treturn {\n\t\t\t\tmetaBoxes: getMetaBoxesPerLocation( location ),\n\t\t\t\tisVisible: isMetaBoxLocationVisible( location ),\n\t\t\t\tareMetaBoxesInitialized: _areMetaBoxesInitialized(),\n\t\t\t\tisEditorReady: __unstableIsEditorReady(),\n\t\t\t};\n\t\t},\n\t\t[ location ]\n\t);\n\n\t// When editor is ready, initialize postboxes (wp core script) and metabox\n\t// saving. This initializes all meta box locations, not just this specific\n\t// one.\n\tuseEffect( () => {\n\t\tif ( isEditorReady && ! areMetaBoxesInitialized ) {\n\t\t\tregistry.dispatch( editPostStore ).initializeMetaBoxes();\n\t\t}\n\t}, [ isEditorReady, areMetaBoxesInitialized ] );\n\n\tif ( ! areMetaBoxesInitialized ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ map( metaBoxes, ( { id } ) => (\n\t\t\t\t<MetaBoxVisibility key={ id } id={ id } />\n\t\t\t) ) }\n\t\t\t{ isVisible && <MetaBoxesArea location={ location } /> }\n\t\t</>\n\t);\n}\n"]}