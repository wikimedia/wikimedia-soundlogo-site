{"version":3,"sources":["@wordpress/edit-post/src/components/layout/actions-panel.js"],"names":["EntitiesSavedStates","PostPublishPanel","store","editorStore","useSelect","useDispatch","Button","createSlotFill","__","useCallback","PluginPostPublishPanel","PluginPrePublishPanel","editPostStore","Fill","Slot","ActionsPanelFill","ActionsPanel","setEntitiesSavedStatesCallback","closeEntitiesSavedStates","isEntitiesSavedStatesOpen","closePublishSidebar","togglePublishSidebar","publishSidebarOpened","hasActiveMetaboxes","isSavingMetaBoxes","hasNonPostEntityChanges","select","isPublishSidebarOpened","hasMetaBoxes","openEntitiesSavedStates","unmountableContent"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tEntitiesSavedStates,\n\tPostPublishPanel,\n\tstore as editorStore,\n} from '@wordpress/editor';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { Button, createSlotFill } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport PluginPostPublishPanel from '../sidebar/plugin-post-publish-panel';\nimport PluginPrePublishPanel from '../sidebar/plugin-pre-publish-panel';\nimport { store as editPostStore } from '../../store';\n\nconst { Fill, Slot } = createSlotFill( 'ActionsPanel' );\n\nexport const ActionsPanelFill = Fill;\n\nexport default function ActionsPanel( {\n\tsetEntitiesSavedStatesCallback,\n\tcloseEntitiesSavedStates,\n\tisEntitiesSavedStatesOpen,\n} ) {\n\tconst { closePublishSidebar, togglePublishSidebar } = useDispatch(\n\t\teditPostStore\n\t);\n\tconst {\n\t\tpublishSidebarOpened,\n\t\thasActiveMetaboxes,\n\t\tisSavingMetaBoxes,\n\t\thasNonPostEntityChanges,\n\t} = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tpublishSidebarOpened: select(\n\t\t\t\teditPostStore\n\t\t\t).isPublishSidebarOpened(),\n\t\t\thasActiveMetaboxes: select( editPostStore ).hasMetaBoxes(),\n\t\t\tisSavingMetaBoxes: select( editPostStore ).isSavingMetaBoxes(),\n\t\t\thasNonPostEntityChanges: select(\n\t\t\t\teditorStore\n\t\t\t).hasNonPostEntityChanges(),\n\t\t};\n\t}, [] );\n\n\tconst openEntitiesSavedStates = useCallback(\n\t\t() => setEntitiesSavedStatesCallback( true ),\n\t\t[]\n\t);\n\n\t// It is ok for these components to be unmounted when not in visual use.\n\t// We don't want more than one present at a time, decide which to render.\n\tlet unmountableContent;\n\tif ( publishSidebarOpened ) {\n\t\tunmountableContent = (\n\t\t\t<PostPublishPanel\n\t\t\t\tonClose={ closePublishSidebar }\n\t\t\t\tforceIsDirty={ hasActiveMetaboxes }\n\t\t\t\tforceIsSaving={ isSavingMetaBoxes }\n\t\t\t\tPrePublishExtension={ PluginPrePublishPanel.Slot }\n\t\t\t\tPostPublishExtension={ PluginPostPublishPanel.Slot }\n\t\t\t/>\n\t\t);\n\t} else if ( hasNonPostEntityChanges ) {\n\t\tunmountableContent = (\n\t\t\t<div className=\"edit-post-layout__toggle-entities-saved-states-panel\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tclassName=\"edit-post-layout__toggle-entities-saved-states-panel-button\"\n\t\t\t\t\tonClick={ openEntitiesSavedStates }\n\t\t\t\t\taria-expanded={ false }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Open save panel' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\tunmountableContent = (\n\t\t\t<div className=\"edit-post-layout__toggle-publish-panel\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tclassName=\"edit-post-layout__toggle-publish-panel-button\"\n\t\t\t\t\tonClick={ togglePublishSidebar }\n\t\t\t\t\taria-expanded={ false }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Open publish panel' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Since EntitiesSavedStates controls its own panel, we can keep it\n\t// always mounted to retain its own component state (such as checkboxes).\n\treturn (\n\t\t<>\n\t\t\t{ isEntitiesSavedStatesOpen && (\n\t\t\t\t<EntitiesSavedStates close={ closeEntitiesSavedStates } />\n\t\t\t) }\n\t\t\t<Slot bubblesVirtually />\n\t\t\t{ ! isEntitiesSavedStatesOpen && unmountableContent }\n\t\t</>\n\t);\n}\n"]}