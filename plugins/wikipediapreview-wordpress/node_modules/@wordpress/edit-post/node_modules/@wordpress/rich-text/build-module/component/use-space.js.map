{"version":3,"sources":["@wordpress/rich-text/src/component/use-space.js"],"names":["useRefEffect","SPACE","useSpace","element","onKeyDown","event","defaultPrevented","keyCode","altKey","metaKey","ctrlKey","target","ownerDocument","execCommand","preventDefault","addEventListener","removeEventListener"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAT,QAA6B,oBAA7B;AACA,SAASC,KAAT,QAAsB,qBAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,QAAT,GAAoB;AAC1B,SAAOF,YAAY,CAAIG,OAAF,IAAe;AACnC,aAASC,SAAT,CAAoBC,KAApB,EAA4B;AAC3B;AACA,UAAKA,KAAK,CAACC,gBAAX,EAA8B;AAC7B;AACA;;AAED,YAAM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,MAAX;AAAmBC,QAAAA,OAAnB;AAA4BC,QAAAA;AAA5B,UAAwCL,KAA9C,CAN2B,CAQ3B;;AACA,UAAKE,OAAO,KAAKN,KAAZ,IAAqBO,MAArB,IAA+BC,OAA/B,IAA0CC,OAA/C,EAAyD;AACxD;AACA;;AAEDL,MAAAA,KAAK,CAACM,MAAN,CAAaC,aAAb,CAA2BC,WAA3B,CAAwC,YAAxC,EAAsD,KAAtD,EAA6D,GAA7D;AACAR,MAAAA,KAAK,CAACS,cAAN;AACA;;AAEDX,IAAAA,OAAO,CAACY,gBAAR,CAA0B,SAA1B,EAAqCX,SAArC;AACA,WAAO,MAAM;AACZD,MAAAA,OAAO,CAACa,mBAAR,CAA6B,SAA7B,EAAwCZ,SAAxC;AACA,KAFD;AAGA,GAtBkB,EAsBhB,EAtBgB,CAAnB;AAuBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { SPACE } from '@wordpress/keycodes';\n\n/**\n * For some elements like BUTTON and SUMMARY, the space key doesn't insert a\n * space character in some browsers even though the element is editable. We have\n * to manually insert a space and prevent default behaviour.\n *\n * DO NOT limit this behaviour to specific tag names! It would mean that this\n * behaviour is not widely tested. If there's ever any problems, we should find\n * a different solution entirely or remove it entirely.\n */\nexport function useSpace() {\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\t// Don't insert a space if default behaviour is prevented.\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { keyCode, altKey, metaKey, ctrlKey } = event;\n\n\t\t\t// Only consider the space key without modifiers pressed.\n\t\t\tif ( keyCode !== SPACE || altKey || metaKey || ctrlKey ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.target.ownerDocument.execCommand( 'insertText', false, ' ' );\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n"]}