{"version":3,"sources":["@wordpress/editor/src/components/provider/with-registry-provider.js"],"names":["useState","useEffect","withRegistry","createRegistry","RegistryProvider","createHigherOrderComponent","storeConfig","blockEditorStoreConfig","withRegistryProvider","WrappedComponent","props","useSubRegistry","registry","additionalProps","subRegistry","setSubRegistry","newRegistry","registerStore"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,SACCC,YADD,EAECC,cAFD,EAGCC,gBAHD,QAIO,iBAJP;AAKA,SAASC,0BAAT,QAA2C,oBAA3C;AACA,SAASC,WAAW,IAAIC,sBAAxB,QAAsD,yBAAtD;AAEA;AACA;AACA;;AACA,SAASD,WAAT,QAA4B,aAA5B;AAEA,MAAME,oBAAoB,GAAGH,0BAA0B,CACpDI,gBAAF,IACCP,YAAY,CAAIQ,KAAF,IAAa;AAC1B,QAAM;AACLC,IAAAA,cAAc,GAAG,IADZ;AAELC,IAAAA,QAFK;AAGL,OAAGC;AAHE,MAIFH,KAJJ;;AAKA,MAAK,CAAEC,cAAP,EAAwB;AACvB,WAAO,cAAC,gBAAD,EAAuBE,eAAvB,CAAP;AACA;;AAED,QAAM,CAAEC,WAAF,EAAeC,cAAf,IAAkCf,QAAQ,CAAE,IAAF,CAAhD;AACAC,EAAAA,SAAS,CAAE,MAAM;AAChB,UAAMe,WAAW,GAAGb,cAAc,CACjC;AACC,2BAAqBI;AADtB,KADiC,EAIjCK,QAJiC,CAAlC;AAMAI,IAAAA,WAAW,CAACC,aAAZ,CAA2B,aAA3B,EAA0CX,WAA1C;AACAS,IAAAA,cAAc,CAAEC,WAAF,CAAd;AACA,GATQ,EASN,CAAEJ,QAAF,CATM,CAAT;;AAWA,MAAK,CAAEE,WAAP,EAAqB;AACpB,WAAO,IAAP;AACA;;AAED,SACC,cAAC,gBAAD;AAAkB,IAAA,KAAK,EAAGA;AAA1B,KACC,cAAC,gBAAD,EAAuBD,eAAvB,CADD,CADD;AAKA,CA/BW,CAFyC,EAkCtD,sBAlCsD,CAAvD;AAqCA,eAAeL,oBAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport {\n\twithRegistry,\n\tcreateRegistry,\n\tRegistryProvider,\n} from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { storeConfig as blockEditorStoreConfig } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) =>\n\t\twithRegistry( ( props ) => {\n\t\t\tconst {\n\t\t\t\tuseSubRegistry = true,\n\t\t\t\tregistry,\n\t\t\t\t...additionalProps\n\t\t\t} = props;\n\t\t\tif ( ! useSubRegistry ) {\n\t\t\t\treturn <WrappedComponent { ...additionalProps } />;\n\t\t\t}\n\n\t\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\n\t\t\tuseEffect( () => {\n\t\t\t\tconst newRegistry = createRegistry(\n\t\t\t\t\t{\n\t\t\t\t\t\t'core/block-editor': blockEditorStoreConfig,\n\t\t\t\t\t},\n\t\t\t\t\tregistry\n\t\t\t\t);\n\t\t\t\tnewRegistry.registerStore( 'core/editor', storeConfig );\n\t\t\t\tsetSubRegistry( newRegistry );\n\t\t\t}, [ registry ] );\n\n\t\t\tif ( ! subRegistry ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t<WrappedComponent { ...additionalProps } />\n\t\t\t\t</RegistryProvider>\n\t\t\t);\n\t\t} ),\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n"]}