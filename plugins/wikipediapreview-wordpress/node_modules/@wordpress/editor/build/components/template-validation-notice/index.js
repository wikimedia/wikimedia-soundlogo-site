"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _element = require("@wordpress/element");

var _components = require("@wordpress/components");

var _i18n = require("@wordpress/i18n");

var _data = require("@wordpress/data");

var _compose = require("@wordpress/compose");

var _blockEditor = require("@wordpress/block-editor");

/**
 * WordPress dependencies
 */
function TemplateValidationNotice({
  isValid,
  ...props
}) {
  if (isValid) {
    return null;
  }

  const confirmSynchronization = () => {
    if ( // eslint-disable-next-line no-alert
    window.confirm((0, _i18n.__)('Resetting the template may result in loss of content, do you want to continue?'))) {
      props.synchronizeTemplate();
    }
  };

  return (0, _element.createElement)(_components.Notice, {
    className: "editor-template-validation-notice",
    isDismissible: false,
    status: "warning",
    actions: [{
      label: (0, _i18n.__)('Keep it as is'),
      onClick: props.resetTemplateValidity
    }, {
      label: (0, _i18n.__)('Reset the template'),
      onClick: confirmSynchronization
    }]
  }, (0, _i18n.__)('The content of your post doesnâ€™t match the template assigned to your post type.'));
}

var _default = (0, _compose.compose)([(0, _data.withSelect)(select => ({
  isValid: select(_blockEditor.store).isValidTemplate()
})), (0, _data.withDispatch)(dispatch => {
  const {
    setTemplateValidity,
    synchronizeTemplate
  } = dispatch(_blockEditor.store);
  return {
    resetTemplateValidity: () => setTemplateValidity(true),
    synchronizeTemplate
  };
})])(TemplateValidationNotice);

exports.default = _default;
//# sourceMappingURL=index.js.map