{"version":3,"sources":["@wordpress/components/src/color-picker/saturation.js"],"names":["clamp","noop","throttle","__","Component","createRef","TAB","UP","DOWN","RIGHT","LEFT","PAGEUP","PAGEDOWN","HOME","END","compose","pure","withInstanceId","calculateSaturationChange","Button","VisuallyHidden","Saturation","constructor","props","fn","data","e","container","saturate","bind","brighten","handleChange","handleMouseDown","handleMouseUp","handleKeyDown","componentWillUnmount","cancel","unbindEventListeners","amount","hsv","onChange","intSaturation","s","Math","round","change","h","v","a","source","intValue","current","window","addEventListener","removeEventListener","event","keyCode","shiftKey","shortcuts","code","String","preventDefault","render","hsl","instanceId","pointerLocation","top","left","background"],"mappings":"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","sourcesContent":["/**\n * Parts of this source were derived and modified from react-color,\n * released under the MIT license.\n *\n * https://github.com/casesandberg/react-color/\n *\n * Copyright (c) 2015 Case Sandberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * External dependencies\n */\nimport { clamp, noop, throttle } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport {\n\tTAB,\n\tUP,\n\tDOWN,\n\tRIGHT,\n\tLEFT,\n\tPAGEUP,\n\tPAGEDOWN,\n\tHOME,\n\tEND,\n} from '@wordpress/keycodes';\nimport { compose, pure, withInstanceId } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { calculateSaturationChange } from './utils';\nimport Button from '../button';\nimport { VisuallyHidden } from '../visually-hidden';\n\nexport class Saturation extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.throttle = throttle( ( fn, data, e ) => {\n\t\t\tfn( data, e );\n\t\t}, 50 );\n\n\t\tthis.container = createRef();\n\t\tthis.saturate = this.saturate.bind( this );\n\t\tthis.brighten = this.brighten.bind( this );\n\t\tthis.handleChange = this.handleChange.bind( this );\n\t\tthis.handleMouseDown = this.handleMouseDown.bind( this );\n\t\tthis.handleMouseUp = this.handleMouseUp.bind( this );\n\t\tthis.handleKeyDown = this.handleKeyDown.bind( this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.throttle.cancel();\n\t\tthis.unbindEventListeners();\n\t}\n\n\tsaturate( amount = 0.01 ) {\n\t\tconst { hsv, onChange = noop } = this.props;\n\t\tconst intSaturation = clamp(\n\t\t\thsv.s + Math.round( amount * 100 ),\n\t\t\t0,\n\t\t\t100\n\t\t);\n\t\tconst change = {\n\t\t\th: hsv.h,\n\t\t\ts: intSaturation,\n\t\t\tv: hsv.v,\n\t\t\ta: hsv.a,\n\t\t\tsource: 'rgb',\n\t\t};\n\n\t\tonChange( change );\n\t}\n\n\tbrighten( amount = 0.01 ) {\n\t\tconst { hsv, onChange = noop } = this.props;\n\t\tconst intValue = clamp( hsv.v + Math.round( amount * 100 ), 0, 100 );\n\t\tconst change = {\n\t\t\th: hsv.h,\n\t\t\ts: hsv.s,\n\t\t\tv: intValue,\n\t\t\ta: hsv.a,\n\t\t\tsource: 'rgb',\n\t\t};\n\n\t\tonChange( change );\n\t}\n\n\thandleChange( e ) {\n\t\tconst { onChange = noop } = this.props;\n\t\tconst change = calculateSaturationChange(\n\t\t\te,\n\t\t\tthis.props,\n\t\t\tthis.container.current\n\t\t);\n\t\tthis.throttle( onChange, change, e );\n\t}\n\n\thandleMouseDown( e ) {\n\t\tthis.handleChange( e );\n\t\twindow.addEventListener( 'mousemove', this.handleChange );\n\t\twindow.addEventListener( 'mouseup', this.handleMouseUp );\n\t}\n\n\thandleMouseUp() {\n\t\tthis.unbindEventListeners();\n\t}\n\n\tunbindEventListeners() {\n\t\twindow.removeEventListener( 'mousemove', this.handleChange );\n\t\twindow.removeEventListener( 'mouseup', this.handleMouseUp );\n\t}\n\n\thandleKeyDown( event ) {\n\t\tconst { keyCode, shiftKey } = event;\n\t\tconst shortcuts = {\n\t\t\t[ UP ]: () => this.brighten( shiftKey ? 0.1 : 0.01 ),\n\t\t\t[ PAGEUP ]: () => this.brighten( 1 ),\n\t\t\t[ DOWN ]: () => this.brighten( shiftKey ? -0.1 : -0.01 ),\n\t\t\t[ PAGEDOWN ]: () => this.brighten( -1 ),\n\t\t\t[ RIGHT ]: () => this.saturate( shiftKey ? 0.1 : 0.01 ),\n\t\t\t[ END ]: () => this.saturate( 1 ),\n\t\t\t[ LEFT ]: () => this.saturate( shiftKey ? -0.1 : -0.01 ),\n\t\t\t[ HOME ]: () => this.saturate( -1 ),\n\t\t};\n\n\t\tfor ( const code in shortcuts ) {\n\t\t\tif ( code === String( keyCode ) ) {\n\t\t\t\tshortcuts[ keyCode ]();\n\t\t\t}\n\t\t}\n\n\t\tif ( keyCode !== TAB ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { hsv, hsl, instanceId } = this.props;\n\t\tconst pointerLocation = {\n\t\t\ttop: `${ -hsv.v + 100 }%`,\n\t\t\tleft: `${ hsv.s }%`,\n\t\t};\n\n\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={ { background: `hsl(${ hsl.h },100%, 50%)` } }\n\t\t\t\tclassName=\"components-color-picker__saturation-color\"\n\t\t\t\tref={ this.container }\n\t\t\t\tonMouseDown={ this.handleMouseDown }\n\t\t\t\tonTouchMove={ this.handleChange }\n\t\t\t\tonTouchStart={ this.handleChange }\n\t\t\t\trole=\"application\"\n\t\t\t>\n\t\t\t\t<div className=\"components-color-picker__saturation-white\" />\n\t\t\t\t<div className=\"components-color-picker__saturation-black\" />\n\t\t\t\t<Button\n\t\t\t\t\taria-label={ __( 'Choose a shade' ) }\n\t\t\t\t\taria-describedby={ `color-picker-saturation-${ instanceId }` }\n\t\t\t\t\tclassName=\"components-color-picker__saturation-pointer\"\n\t\t\t\t\tstyle={ pointerLocation }\n\t\t\t\t\tonKeyDown={ this.handleKeyDown }\n\t\t\t\t/>\n\t\t\t\t<VisuallyHidden\n\t\t\t\t\tid={ `color-picker-saturation-${ instanceId }` }\n\t\t\t\t>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Use your arrow keys to change the base color. Move up to lighten the color, down to darken, left to decrease saturation, and right to increase saturation.'\n\t\t\t\t\t) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t</div>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions */\n\t}\n}\n\nexport default compose( pure, withInstanceId )( Saturation );\n"]}