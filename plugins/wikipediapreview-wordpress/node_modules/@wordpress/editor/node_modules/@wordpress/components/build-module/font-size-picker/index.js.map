{"version":3,"sources":["@wordpress/components/src/font-size-picker/index.js"],"names":["isNumber","isString","__","sprintf","textColor","useMemo","forwardRef","Button","RangeControl","default","UnitControl","useCustomUnits","CustomSelectControl","VisuallyHidden","DEFAULT_FONT_SIZE","CUSTOM_FONT_SIZE","MAX_FONT_SIZE_DISPLAY","getSelectValueFromFontSize","fontSizes","value","fontSizeValue","find","font","size","slug","getSelectOptions","optionsArray","disableCustomFontSizes","length","name","map","option","key","style","fontSize","FontSizePicker","fallbackFontSize","onChange","withSlider","ref","hasUnits","noUnitsValue","parseInt","isPixelValue","endsWith","units","availableUnits","options","selectedFontSizeSlug","currentFontSizeSR","selectedItem","Number","nextSize","parseFloat","undefined","newValue"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { isNumber, isString } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { textColor } from '@wordpress/icons';\nimport { useMemo, forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Button from '../button';\nimport RangeControl from '../range-control';\nimport { default as UnitControl, useCustomUnits } from '../unit-control';\nimport CustomSelectControl from '../custom-select-control';\nimport { VisuallyHidden } from '../visually-hidden';\n\nconst DEFAULT_FONT_SIZE = 'default';\nconst CUSTOM_FONT_SIZE = 'custom';\nconst MAX_FONT_SIZE_DISPLAY = '25px';\n\nfunction getSelectValueFromFontSize( fontSizes, value ) {\n\tif ( value ) {\n\t\tconst fontSizeValue = fontSizes.find( ( font ) => font.size === value );\n\t\treturn fontSizeValue ? fontSizeValue.slug : CUSTOM_FONT_SIZE;\n\t}\n\treturn DEFAULT_FONT_SIZE;\n}\n\nfunction getSelectOptions( optionsArray, disableCustomFontSizes ) {\n\tif ( disableCustomFontSizes && ! optionsArray.length ) {\n\t\treturn null;\n\t}\n\toptionsArray = [\n\t\t{ slug: DEFAULT_FONT_SIZE, name: __( 'Default' ) },\n\t\t...optionsArray,\n\t\t...( disableCustomFontSizes\n\t\t\t? []\n\t\t\t: [ { slug: CUSTOM_FONT_SIZE, name: __( 'Custom' ) } ] ),\n\t];\n\treturn optionsArray.map( ( option ) => ( {\n\t\tkey: option.slug,\n\t\tname: option.name,\n\t\tsize: option.size,\n\t\tstyle: {\n\t\t\tfontSize: `min( ${ option.size }, ${ MAX_FONT_SIZE_DISPLAY } )`,\n\t\t},\n\t} ) );\n}\n\nfunction FontSizePicker(\n\t{\n\t\tfallbackFontSize,\n\t\tfontSizes = [],\n\t\tdisableCustomFontSizes = false,\n\t\tonChange,\n\t\tvalue,\n\t\twithSlider = false,\n\t},\n\tref\n) {\n\tconst hasUnits =\n\t\tisString( value ) ||\n\t\t( fontSizes[ 0 ] && isString( fontSizes[ 0 ].size ) );\n\n\tlet noUnitsValue;\n\tif ( ! hasUnits ) {\n\t\tnoUnitsValue = value;\n\t} else {\n\t\tnoUnitsValue = parseInt( value );\n\t}\n\n\tconst isPixelValue =\n\t\tisNumber( value ) || ( isString( value ) && value.endsWith( 'px' ) );\n\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: [ 'px', 'em', 'rem' ],\n\t} );\n\n\tconst options = useMemo(\n\t\t() => getSelectOptions( fontSizes, disableCustomFontSizes ),\n\t\t[ fontSizes, disableCustomFontSizes ]\n\t);\n\n\tif ( ! options ) {\n\t\treturn null;\n\t}\n\n\tconst selectedFontSizeSlug = getSelectValueFromFontSize( fontSizes, value );\n\n\tconst currentFontSizeSR = sprintf(\n\t\t// translators: %s: Currently selected font size.\n\t\t__( 'Currently selected font size: %s' ),\n\t\toptions.find( ( option ) => option.key === selectedFontSizeSlug ).name\n\t);\n\n\treturn (\n\t\t<fieldset\n\t\t\tclassName=\"components-font-size-picker\"\n\t\t\t{ ...( ref ? {} : { ref } ) }\n\t\t>\n\t\t\t<VisuallyHidden as=\"legend\">{ __( 'Font size' ) }</VisuallyHidden>\n\t\t\t<div className=\"components-font-size-picker__controls\">\n\t\t\t\t{ fontSizes.length > 0 && (\n\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\tclassName={ 'components-font-size-picker__select' }\n\t\t\t\t\t\tlabel={ __( 'Font size' ) }\n\t\t\t\t\t\tdescribedBy={ currentFontSizeSR }\n\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\tvalue={ options.find(\n\t\t\t\t\t\t\t( option ) => option.key === selectedFontSizeSlug\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\t\t\tif ( hasUnits ) {\n\t\t\t\t\t\t\t\tonChange( selectedItem.size );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tonChange( Number( selectedItem.size ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! withSlider && ! disableCustomFontSizes && (\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tlabel={ __( 'Custom' ) }\n\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t__unstableInputWidth=\"60px\"\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ ( nextSize ) => {\n\t\t\t\t\t\t\tif ( 0 === parseFloat( nextSize ) || ! nextSize ) {\n\t\t\t\t\t\t\t\tonChange( undefined );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\thasUnits\n\t\t\t\t\t\t\t\t\t\t? nextSize\n\t\t\t\t\t\t\t\t\t\t: parseInt( nextSize, 10 )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tunits={ hasUnits ? units : false }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"components-color-palette__clear\"\n\t\t\t\t\tdisabled={ value === undefined }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonChange( undefined );\n\t\t\t\t\t} }\n\t\t\t\t\tisSmall\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t{ withSlider && (\n\t\t\t\t<RangeControl\n\t\t\t\t\tclassName=\"components-font-size-picker__custom-input\"\n\t\t\t\t\tlabel={ __( 'Custom Size' ) }\n\t\t\t\t\tvalue={ ( isPixelValue && noUnitsValue ) || '' }\n\t\t\t\t\tinitialPosition={ fallbackFontSize }\n\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\tonChange( hasUnits ? newValue + 'px' : newValue );\n\t\t\t\t\t} }\n\t\t\t\t\tmin={ 12 }\n\t\t\t\t\tmax={ 100 }\n\t\t\t\t\tbeforeIcon={ textColor }\n\t\t\t\t\tafterIcon={ textColor }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</fieldset>\n\t);\n}\n\nexport default forwardRef( FontSizePicker );\n"]}