{"version":3,"sources":["@wordpress/components/src/mobile/color-settings/palette.screen.native.js"],"names":["View","Text","TouchableWithoutFeedback","__","useState","useContext","usePreferredColorSchemeStyle","ColorControl","PanelBody","BottomSheetContext","useRoute","useNavigation","ColorPalette","ColorIndicator","NavBar","SegmentedControls","colorsUtils","styles","HIT_SLOP","top","bottom","left","right","PaletteScreen","route","navigation","shouldEnableBottomSheetScroll","label","onColorChange","onGradientChange","colorValue","defaultSettings","params","segments","isGradient","currentValue","setCurrentValue","isGradientColor","selectedSegmentIndex","currentSegment","setCurrentSegment","horizontalSeparatorStyle","horizontalSeparator","horizontalSeparatorDark","clearButtonStyle","clearButton","clearButtonDark","selectedColorTextStyle","colorText","colorTextDark","isSolidSegment","isCustomGadientShown","setColor","color","onClear","undefined","onCustomPress","navigate","screens","picker","gradientPicker","getClearButton","clearButtonContainer","getFooter","indexOf","colorIndicator","footer","flex","toUpperCase","selectColorText","goBack"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useContext } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport {\n\tColorControl,\n\tPanelBody,\n\tBottomSheetContext,\n} from '@wordpress/components';\nimport { useRoute, useNavigation } from '@react-navigation/native';\n/**\n * Internal dependencies\n */\nimport ColorPalette from '../../color-palette';\nimport ColorIndicator from '../../color-indicator';\nimport NavBar from '../bottom-sheet/nav-bar';\nimport SegmentedControls from '../segmented-control';\nimport { colorsUtils } from './utils';\n\nimport styles from './style.scss';\n\nconst HIT_SLOP = { top: 22, bottom: 22, left: 22, right: 22 };\n\nconst PaletteScreen = () => {\n\tconst route = useRoute();\n\tconst navigation = useNavigation();\n\tconst { shouldEnableBottomSheetScroll } = useContext( BottomSheetContext );\n\tconst {\n\t\tlabel,\n\t\tonColorChange,\n\t\tonGradientChange,\n\t\tcolorValue,\n\t\tdefaultSettings,\n\t} = route.params || {};\n\tconst { segments, isGradient } = colorsUtils;\n\tconst [ currentValue, setCurrentValue ] = useState( colorValue );\n\tconst isGradientColor = isGradient( currentValue );\n\tconst selectedSegmentIndex = isGradientColor ? 1 : 0;\n\n\tconst [ currentSegment, setCurrentSegment ] = useState(\n\t\tsegments[ selectedSegmentIndex ]\n\t);\n\n\tconst horizontalSeparatorStyle = usePreferredColorSchemeStyle(\n\t\tstyles.horizontalSeparator,\n\t\tstyles.horizontalSeparatorDark\n\t);\n\tconst clearButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.clearButton,\n\t\tstyles.clearButtonDark\n\t);\n\tconst selectedColorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.colorText,\n\t\tstyles.colorTextDark\n\t);\n\n\tconst isSolidSegment = currentSegment === segments[ 0 ];\n\tconst isCustomGadientShown = ! isSolidSegment && isGradientColor;\n\n\tconst setColor = ( color ) => {\n\t\tsetCurrentValue( color );\n\t\tif ( isSolidSegment && onColorChange && onGradientChange ) {\n\t\t\tonColorChange( color );\n\t\t\tonGradientChange( '' );\n\t\t} else if ( isSolidSegment && onColorChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( ! isSolidSegment && onGradientChange ) {\n\t\t\tonGradientChange( color );\n\t\t\tonColorChange( '' );\n\t\t}\n\t};\n\n\tfunction onClear() {\n\t\tsetCurrentValue( undefined );\n\t\tif ( isSolidSegment ) {\n\t\t\tonColorChange( '' );\n\t\t} else {\n\t\t\tonGradientChange( '' );\n\t\t}\n\t}\n\n\tfunction onCustomPress() {\n\t\tif ( isSolidSegment ) {\n\t\t\tnavigation.navigate( colorsUtils.screens.picker, {\n\t\t\t\tcurrentValue,\n\t\t\t\tsetColor,\n\t\t\t} );\n\t\t} else {\n\t\t\tnavigation.navigate( colorsUtils.screens.gradientPicker, {\n\t\t\t\tsetColor,\n\t\t\t\tisGradientColor,\n\t\t\t\tcurrentValue,\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction getClearButton() {\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback onPress={ onClear } hitSlop={ HIT_SLOP }>\n\t\t\t\t<View style={ styles.clearButtonContainer }>\n\t\t\t\t\t<Text style={ clearButtonStyle }>{ __( 'Reset' ) }</Text>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n\n\tfunction getFooter() {\n\t\tif ( onGradientChange ) {\n\t\t\treturn (\n\t\t\t\t<SegmentedControls\n\t\t\t\t\tsegments={ segments }\n\t\t\t\t\tsegmentHandler={ setCurrentSegment }\n\t\t\t\t\tselectedIndex={ segments.indexOf( currentSegment ) }\n\t\t\t\t\taddonLeft={\n\t\t\t\t\t\tcurrentValue && (\n\t\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\taddonRight={ currentValue && getClearButton() }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<View style={ styles.footer }>\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && (\n\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t\t{ currentValue ? (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tstyle={ selectedColorTextStyle }\n\t\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t\t\tselectable\n\t\t\t\t\t>\n\t\t\t\t\t\t{ currentValue.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t) : (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tstyle={ styles.selectColorText }\n\t\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Select a color above' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && getClearButton() }\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t);\n\t}\n\treturn (\n\t\t<View>\n\t\t\t<NavBar>\n\t\t\t\t<NavBar.BackButton onPress={ navigation.goBack } />\n\t\t\t\t<NavBar.Heading>{ label } </NavBar.Heading>\n\t\t\t</NavBar>\n\t\t\t<ColorPalette\n\t\t\t\tsetColor={ setColor }\n\t\t\t\tactiveColor={ currentValue }\n\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\tcurrentSegment={ currentSegment }\n\t\t\t\tonCustomPress={ onCustomPress }\n\t\t\t\tshouldEnableBottomSheetScroll={ shouldEnableBottomSheetScroll }\n\t\t\t\tdefaultSettings={ defaultSettings }\n\t\t\t/>\n\t\t\t{ isCustomGadientShown && (\n\t\t\t\t<>\n\t\t\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t<ColorControl\n\t\t\t\t\t\t\tlabel={ __( 'Customize Gradient' ) }\n\t\t\t\t\t\t\tonPress={ onCustomPress }\n\t\t\t\t\t\t\twithColorIndicator={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t{ getFooter() }\n\t\t</View>\n\t);\n};\n\nexport default PaletteScreen;\n"]}