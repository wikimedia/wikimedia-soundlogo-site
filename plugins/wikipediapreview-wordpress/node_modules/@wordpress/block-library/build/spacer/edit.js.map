{"version":3,"sources":["@wordpress/block-library/src/spacer/edit.js"],"names":["MIN_SPACER_HEIGHT","MAX_SPACER_HEIGHT","MIN_SPACER_WIDTH","MAX_SPACER_WIDTH","SpacerEdit","attributes","isSelected","setAttributes","onResizeStart","onResizeStop","context","orientation","isResizing","setIsResizing","height","width","updateHeight","value","updateWidth","handleOnResizeStart","args","handleOnVerticalResizeStop","event","direction","elt","delta","spacerHeight","Math","min","parseInt","handleOnHorizontalResizeStop","spacerWidth","resizableBoxWithOrientation","blockOrientation","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","axis","position","isVisible","max","dispatch","toggleSelection","blockEditorStore","withInstanceId"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tInspectorControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { PanelBody, ResizableBox, RangeControl } from '@wordpress/components';\nimport { compose, withInstanceId } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport { useState, useEffect } from '@wordpress/element';\nimport { View } from '@wordpress/primitives';\n\nconst MIN_SPACER_HEIGHT = 1;\nconst MAX_SPACER_HEIGHT = 500;\n\nconst MIN_SPACER_WIDTH = 1;\nconst MAX_SPACER_WIDTH = 500;\n\nconst SpacerEdit = ( {\n\tattributes,\n\tisSelected,\n\tsetAttributes,\n\tonResizeStart,\n\tonResizeStop,\n\tcontext,\n} ) => {\n\tconst { orientation } = context;\n\tconst [ isResizing, setIsResizing ] = useState( false );\n\tconst { height, width } = attributes;\n\tconst updateHeight = ( value ) => {\n\t\tsetAttributes( {\n\t\t\theight: value,\n\t\t} );\n\t};\n\tconst updateWidth = ( value ) => {\n\t\tsetAttributes( {\n\t\t\twidth: value,\n\t\t} );\n\t};\n\n\tconst handleOnResizeStart = ( ...args ) => {\n\t\tonResizeStart( ...args );\n\t\tsetIsResizing( true );\n\t};\n\n\tconst handleOnVerticalResizeStop = ( event, direction, elt, delta ) => {\n\t\tonResizeStop();\n\t\tconst spacerHeight = Math.min(\n\t\t\tparseInt( height + delta.height, 10 ),\n\t\t\tMAX_SPACER_HEIGHT\n\t\t);\n\t\tupdateHeight( spacerHeight );\n\t\tsetIsResizing( false );\n\t};\n\n\tconst handleOnHorizontalResizeStop = ( event, direction, elt, delta ) => {\n\t\tonResizeStop();\n\t\tconst spacerWidth = Math.min(\n\t\t\tparseInt( width + delta.width, 10 ),\n\t\t\tMAX_SPACER_WIDTH\n\t\t);\n\t\tupdateWidth( spacerWidth );\n\t\tsetIsResizing( false );\n\t};\n\n\tconst resizableBoxWithOrientation = ( blockOrientation ) => {\n\t\tif ( blockOrientation === 'horizontal' ) {\n\t\t\treturn (\n\t\t\t\t<ResizableBox\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-library-spacer__resize-container',\n\t\t\t\t\t\t'resize-horizontal',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-selected': isSelected,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tsize={ {\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight: 24,\n\t\t\t\t\t} }\n\t\t\t\t\tminWidth={ MIN_SPACER_WIDTH }\n\t\t\t\t\tenable={ {\n\t\t\t\t\t\ttop: false,\n\t\t\t\t\t\tright: true,\n\t\t\t\t\t\tbottom: false,\n\t\t\t\t\t\tleft: false,\n\t\t\t\t\t\ttopRight: false,\n\t\t\t\t\t\tbottomRight: false,\n\t\t\t\t\t\tbottomLeft: false,\n\t\t\t\t\t\ttopLeft: false,\n\t\t\t\t\t} }\n\t\t\t\t\tonResizeStart={ handleOnResizeStart }\n\t\t\t\t\tonResizeStop={ handleOnHorizontalResizeStop }\n\t\t\t\t\tshowHandle={ isSelected }\n\t\t\t\t\t__experimentalShowTooltip={ true }\n\t\t\t\t\t__experimentalTooltipProps={ {\n\t\t\t\t\t\taxis: 'x',\n\t\t\t\t\t\tposition: 'corner',\n\t\t\t\t\t\tisVisible: isResizing,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<ResizableBox\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-library-spacer__resize-container',\n\t\t\t\t\t{\n\t\t\t\t\t\t'is-selected': isSelected,\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t\tsize={ {\n\t\t\t\t\theight,\n\t\t\t\t} }\n\t\t\t\tminHeight={ MIN_SPACER_HEIGHT }\n\t\t\t\tenable={ {\n\t\t\t\t\ttop: false,\n\t\t\t\t\tright: false,\n\t\t\t\t\tbottom: true,\n\t\t\t\t\tleft: false,\n\t\t\t\t\ttopRight: false,\n\t\t\t\t\tbottomRight: false,\n\t\t\t\t\tbottomLeft: false,\n\t\t\t\t\ttopLeft: false,\n\t\t\t\t} }\n\t\t\t\tonResizeStart={ handleOnResizeStart }\n\t\t\t\tonResizeStop={ handleOnVerticalResizeStop }\n\t\t\t\tshowHandle={ isSelected }\n\t\t\t\t__experimentalShowTooltip={ true }\n\t\t\t\t__experimentalTooltipProps={ {\n\t\t\t\t\taxis: 'y',\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\tisVisible: isResizing,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n\n\tuseEffect( () => {\n\t\tif ( orientation === 'horizontal' && ! width ) {\n\t\t\tupdateWidth( 72 );\n\t\t\tupdateHeight( 0 );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<>\n\t\t\t<View { ...useBlockProps() }>\n\t\t\t\t{ resizableBoxWithOrientation( orientation ) }\n\t\t\t</View>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Spacer settings' ) }>\n\t\t\t\t\t{ orientation === 'horizontal' && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Width in pixels' ) }\n\t\t\t\t\t\t\tmin={ MIN_SPACER_WIDTH }\n\t\t\t\t\t\t\tmax={ Math.max( MAX_SPACER_WIDTH, width ) }\n\t\t\t\t\t\t\tvalue={ width }\n\t\t\t\t\t\t\tonChange={ updateWidth }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ orientation !== 'horizontal' && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Height in pixels' ) }\n\t\t\t\t\t\t\tmin={ MIN_SPACER_HEIGHT }\n\t\t\t\t\t\t\tmax={ Math.max( MAX_SPACER_HEIGHT, height ) }\n\t\t\t\t\t\t\tvalue={ height }\n\t\t\t\t\t\t\tonChange={ updateHeight }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t</>\n\t);\n};\n\nexport default compose( [\n\twithDispatch( ( dispatch ) => {\n\t\tconst { toggleSelection } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonResizeStart: () => toggleSelection( false ),\n\t\t\tonResizeStop: () => toggleSelection( true ),\n\t\t};\n\t} ),\n\twithInstanceId,\n] )( SpacerEdit );\n"]}