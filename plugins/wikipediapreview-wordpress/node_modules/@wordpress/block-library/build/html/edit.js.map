{"version":3,"sources":["@wordpress/block-library/src/html/edit.js"],"names":["HTMLEdit","attributes","setAttributes","isSelected","isPreview","setIsPreview","styles","select","defaultStyles","blockEditorStore","getSettings","switchToPreview","switchToHTML","className","isDisabled","content"],"mappings":";;;;;;;AAIA;;AADA;;AAEA;;AAOA;;AAMA;;AAlBA;AACA;AACA;AAkBe,SAASA,QAAT,CAAmB;AAAEC,EAAAA,UAAF;AAAcC,EAAAA,aAAd;AAA6BC,EAAAA;AAA7B,CAAnB,EAA+D;AAC7E,QAAM,CAAEC,SAAF,EAAaC,YAAb,IAA8B,wBAApC;AAEA,QAAMC,MAAM,GAAG,qBAAaC,MAAF,IAAc;AACvC;AACA;AACA,UAAMC,aAAa,GAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,GAPE;AASA,WAAO,CACNA,aADM,EAEN,GAAG,kCACFD,MAAM,CAAEE,kBAAF,CAAN,CAA2BC,WAA3B,GAAyCJ,MADvC,CAFG,CAAP;AAMA,GAlBc,EAkBZ,EAlBY,CAAf;;AAoBA,WAASK,eAAT,GAA2B;AAC1BN,IAAAA,YAAY,CAAE,IAAF,CAAZ;AACA;;AAED,WAASO,YAAT,GAAwB;AACvBP,IAAAA,YAAY,CAAE,KAAF,CAAZ;AACA;;AAED,SACC,mCAAU,gCAAe;AAAEQ,IAAAA,SAAS,EAAE;AAAb,GAAf,CAAV,EACC,4BAAC,0BAAD,QACC,4BAAC,wBAAD,QACC,4BAAC,yBAAD;AACC,IAAA,SAAS,EAAC,uBADX;AAEC,IAAA,SAAS,EAAG,CAAET,SAFf;AAGC,IAAA,OAAO,EAAGQ;AAHX,KAKC,iDALD,CADD,EAQC,4BAAC,yBAAD;AACC,IAAA,SAAS,EAAC,uBADX;AAEC,IAAA,SAAS,EAAGR,SAFb;AAGC,IAAA,OAAO,EAAGO;AAHX,KAKC,0CAAQ,cAAI,SAAJ,CAAR,CALD,CARD,CADD,CADD,EAmBC,4BAAC,oBAAD,CAAU,QAAV,QACKG,UAAF,IACDV,SAAS,IAAIU,UAAb,GACC,qDACC,4BAAC,mBAAD;AACC,IAAA,IAAI,EAAGb,UAAU,CAACc,OADnB;AAEC,IAAA,MAAM,EAAGT;AAFV,IADD,EAUG,CAAEH,UAAF,IACD;AAAK,IAAA,SAAS,EAAC;AAAf,IAXF,CADD,GAgBC,4BAAC,sBAAD;AACC,IAAA,KAAK,EAAGF,UAAU,CAACc,OADpB;AAEC,IAAA,QAAQ,EAAKA,OAAF,IACVb,aAAa,CAAE;AAAEa,MAAAA;AAAF,KAAF,CAHf;AAKC,IAAA,WAAW,EAAG,cAAI,aAAJ,CALf;AAMC,kBAAa,cAAI,MAAJ;AANd,IAlBH,CAnBD,CADD;AAmDA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tBlockControls,\n\tPlainText,\n\ttransformStyles,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport {\n\tToolbarButton,\n\tDisabled,\n\tSandBox,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\nexport default function HTMLEdit( { attributes, setAttributes, isSelected } ) {\n\tconst [ isPreview, setIsPreview ] = useState();\n\n\tconst styles = useSelect( ( select ) => {\n\t\t// Default styles used to unset some of the styles\n\t\t// that might be inherited from the editor style.\n\t\tconst defaultStyles = `\n\t\t\thtml,body,:root {\n\t\t\t\tmargin: 0 !important;\n\t\t\t\tpadding: 0 !important;\n\t\t\t\toverflow: visible !important;\n\t\t\t\tmin-height: auto !important;\n\t\t\t}\n\t\t`;\n\n\t\treturn [\n\t\t\tdefaultStyles,\n\t\t\t...transformStyles(\n\t\t\t\tselect( blockEditorStore ).getSettings().styles\n\t\t\t),\n\t\t];\n\t}, [] );\n\n\tfunction switchToPreview() {\n\t\tsetIsPreview( true );\n\t}\n\n\tfunction switchToHTML() {\n\t\tsetIsPreview( false );\n\t}\n\n\treturn (\n\t\t<div { ...useBlockProps( { className: 'block-library-html__edit' } ) }>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName=\"components-tab-button\"\n\t\t\t\t\t\tisPressed={ ! isPreview }\n\t\t\t\t\t\tonClick={ switchToHTML }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>HTML</span>\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName=\"components-tab-button\"\n\t\t\t\t\t\tisPressed={ isPreview }\n\t\t\t\t\t\tonClick={ switchToPreview }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{ __( 'Preview' ) }</span>\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<Disabled.Consumer>\n\t\t\t\t{ ( isDisabled ) =>\n\t\t\t\t\tisPreview || isDisabled ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<SandBox\n\t\t\t\t\t\t\t\thtml={ attributes.content }\n\t\t\t\t\t\t\t\tstyles={ styles }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ /*\t\n\t\t\t\t\t\t\t\t\tAn overlay is added when the block is not selected in order to register click events. \n\t\t\t\t\t\t\t\t\tSome browsers do not bubble up the clicks from the sandboxed iframe, which makes it \n\t\t\t\t\t\t\t\t\tdifficult to reselect the block. \n\t\t\t\t\t\t\t\t*/ }\n\t\t\t\t\t\t\t{ ! isSelected && (\n\t\t\t\t\t\t\t\t<div className=\"block-library-html__preview-overlay\"></div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<PlainText\n\t\t\t\t\t\t\tvalue={ attributes.content }\n\t\t\t\t\t\t\tonChange={ ( content ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { content } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplaceholder={ __( 'Write HTMLâ€¦' ) }\n\t\t\t\t\t\t\taria-label={ __( 'HTML' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</Disabled.Consumer>\n\t\t</div>\n\t);\n}\n"]}