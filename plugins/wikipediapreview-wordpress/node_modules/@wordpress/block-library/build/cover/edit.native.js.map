{"version":3,"sources":["@wordpress/block-library/src/cover/edit.native.js"],"names":["INNER_BLOCKS_TEMPLATE","align","placeholder","Cover","attributes","getStylesFromColorScheme","isParentSelected","onFocus","overlayColor","setAttributes","openGeneralSidebar","closeSettingsBottomSheet","isSelected","selectBlock","blockWidth","backgroundType","dimRatio","focalPoint","minHeight","url","id","style","customOverlayColor","minHeightUnit","isScreenReaderEnabled","setIsScreenReaderEnabled","isCurrent","AccessibilityInfo","addEventListener","then","removeEventListener","convertedMinHeight","COVER_DEFAULT_HEIGHT","isImage","MEDIA_TYPE_IMAGE","THEME_COLORS_COUNT","colorsDefault","coverDefaultPalette","colors","slice","gradientValue","hasBackground","color","background","hasOnlyColorBackground","isCustomColorPickerShowing","setCustomColorPickerShowing","openMediaOptionsRef","overlay","childrenStyles","styles","defaultColor","isUploadInProgress","setIsUploadInProgress","didUploadFail","setDidUploadFail","shouldShowFailure","onSelectMedia","media","onSelect","onMediaPressed","isVideoLoading","setIsVideoLoading","onVideoLoadStart","onVideoLoad","onClearMedia","undefined","hasParallax","setColor","gradient","customGradient","openColorPicker","backgroundColor","backgroundSolid","backgroundSolidDark","overlayStyles","opacity","overlaySelected","placeholderIconStyle","icon","iconDark","placeholderIcon","toolbarControls","open","replace","accessibilityHint","Platform","OS","addMediaButton","current","selectImageContainer","selectImage","image","selectImageIcon","onBottomSheetClosed","InteractionManager","runAfterInteractions","colorPickerControls","shouldEnableBottomSheetScroll","shouldEnableBottomSheetMaxHeight","onHandleClosingBottomSheet","onHandleHardwareButtonPress","isBottomSheetContentScrolling","renderContent","getMediaOptions","renderBackground","VIDEO_BACKGROUND_TYPE","mediaServerId","mediaUrl","IMAGE_BACKGROUND_TYPE","imageContainer","IMAGE_DEFAULT_FOCAL_POINT","width","uri","mediaPlaceholderEmptyStateContainer","height","title","ALLOWED_MEDIA_TYPES","colorPaletteWrapper","paletteColorIndicator","paletteCustomIndicatorWrapper","backgroundContainer","content","overlayContainer","imageEditButton","destructiveButton","label","onPress","separated","value","uploadFailedContainer","uploadFailed","warning","uploadFailedIcon","select","clientId","getSelectedBlockClientId","blockEditorStore","selectedBlockClientId","getSettings","settings","dispatch","editPostStore","closeGeneralSidebar","withPreferredColorScheme"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tView,\n\tTouchableWithoutFeedback,\n\tInteractionManager,\n\tAccessibilityInfo,\n\tPlatform,\n} from 'react-native';\nimport Video from 'react-native-video';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\trequestImageFullscreenPreview,\n\tmediaUploadSync,\n} from '@wordpress/react-native-bridge';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tIcon,\n\tImage,\n\tImageEditingButton,\n\tIMAGE_DEFAULT_FOCAL_POINT,\n\tToolbarButton,\n\tGradient,\n\tColorPalette,\n\tColorPicker,\n\tBottomSheetConsumer,\n\tuseConvertUnitToMobile,\n} from '@wordpress/components';\nimport {\n\tBlockControls,\n\tInnerBlocks,\n\tInspectorControls,\n\tMEDIA_TYPE_IMAGE,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMediaUploadProgress,\n\twithColors,\n\t__experimentalUseGradient,\n\tuseSetting,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\nimport { cover as icon, replace, image, warning } from '@wordpress/icons';\nimport { getProtocol } from '@wordpress/url';\nimport { store as editPostStore } from '@wordpress/edit-post';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport {\n\tattributesFromMedia,\n\tALLOWED_MEDIA_TYPES,\n\tIMAGE_BACKGROUND_TYPE,\n\tVIDEO_BACKGROUND_TYPE,\n\tCOVER_DEFAULT_HEIGHT,\n} from './shared';\nimport Controls from './controls';\n\n/**\n * Constants\n */\nconst INNER_BLOCKS_TEMPLATE = [\n\t[\n\t\t'core/paragraph',\n\t\t{\n\t\t\talign: 'center',\n\t\t\tplaceholder: __( 'Write title…' ),\n\t\t},\n\t],\n];\n\nconst Cover = ( {\n\tattributes,\n\tgetStylesFromColorScheme,\n\tisParentSelected,\n\tonFocus,\n\toverlayColor,\n\tsetAttributes,\n\topenGeneralSidebar,\n\tcloseSettingsBottomSheet,\n\tisSelected,\n\tselectBlock,\n\tblockWidth,\n} ) => {\n\tconst {\n\t\tbackgroundType,\n\t\tdimRatio,\n\t\tfocalPoint,\n\t\tminHeight,\n\t\turl,\n\t\tid,\n\t\tstyle,\n\t\tcustomOverlayColor,\n\t\tminHeightUnit = 'px',\n\t} = attributes;\n\tconst [ isScreenReaderEnabled, setIsScreenReaderEnabled ] = useState(\n\t\tfalse\n\t);\n\n\tuseEffect( () => {\n\t\tlet isCurrent = true;\n\n\t\t// sync with local media store\n\t\tmediaUploadSync();\n\t\tAccessibilityInfo.addEventListener(\n\t\t\t'screenReaderChanged',\n\t\t\tsetIsScreenReaderEnabled\n\t\t);\n\n\t\tAccessibilityInfo.isScreenReaderEnabled().then( () => {\n\t\t\tif ( isCurrent ) {\n\t\t\t\tsetIsScreenReaderEnabled();\n\t\t\t}\n\t\t} );\n\n\t\treturn () => {\n\t\t\tisCurrent = false;\n\t\t\tAccessibilityInfo.removeEventListener(\n\t\t\t\t'screenReaderChanged',\n\t\t\t\tsetIsScreenReaderEnabled\n\t\t\t);\n\t\t};\n\t}, [] );\n\n\tconst convertedMinHeight = useConvertUnitToMobile(\n\t\tminHeight || COVER_DEFAULT_HEIGHT,\n\t\tminHeightUnit\n\t);\n\n\tconst isImage = backgroundType === MEDIA_TYPE_IMAGE;\n\n\tconst THEME_COLORS_COUNT = 4;\n\tconst colorsDefault = useSetting( 'color.palette' ) || [];\n\tconst coverDefaultPalette = {\n\t\tcolors: colorsDefault.slice( 0, THEME_COLORS_COUNT ),\n\t};\n\n\tconst { gradientValue } = __experimentalUseGradient();\n\n\tconst hasBackground = !! (\n\t\turl ||\n\t\t( style && style.color && style.color.background ) ||\n\t\tattributes.overlayColor ||\n\t\toverlayColor.color ||\n\t\tgradientValue\n\t);\n\n\tconst hasOnlyColorBackground = ! url && hasBackground;\n\n\tconst [\n\t\tisCustomColorPickerShowing,\n\t\tsetCustomColorPickerShowing,\n\t] = useState( false );\n\n\tconst openMediaOptionsRef = useRef();\n\n\t// Used to set a default color for its InnerBlocks\n\t// since there's no system to inherit styles yet\n\t// the RichText component will check if there are\n\t// parent styles for the current block. If there are,\n\t// it will use that color instead.\n\tuseEffect( () => {\n\t\t// While we don't support theme colors\n\t\tif ( ! attributes.overlayColor || ( ! attributes.overlay && url ) ) {\n\t\t\tsetAttributes( { childrenStyles: styles.defaultColor } );\n\t\t}\n\t}, [ setAttributes ] );\n\n\t// initialize uploading flag to false, awaiting sync\n\tconst [ isUploadInProgress, setIsUploadInProgress ] = useState( false );\n\n\t// initialize upload failure flag to true if url is local\n\tconst [ didUploadFail, setDidUploadFail ] = useState(\n\t\tid && getProtocol( url ) === 'file:'\n\t);\n\n\t// don't show failure if upload is in progress\n\tconst shouldShowFailure = didUploadFail && ! isUploadInProgress;\n\n\tconst onSelectMedia = ( media ) => {\n\t\tsetDidUploadFail( false );\n\t\tconst onSelect = attributesFromMedia( setAttributes );\n\t\tonSelect( media );\n\t};\n\n\tconst onMediaPressed = () => {\n\t\tif ( isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( id );\n\t\t} else if ( shouldShowFailure ) {\n\t\t\trequestImageFailedRetryDialog( id );\n\t\t} else if ( isImage && url ) {\n\t\t\trequestImageFullscreenPreview( url );\n\t\t}\n\t};\n\n\tconst [ isVideoLoading, setIsVideoLoading ] = useState( true );\n\n\tconst onVideoLoadStart = () => {\n\t\tsetIsVideoLoading( true );\n\t};\n\n\tconst onVideoLoad = () => {\n\t\tsetIsVideoLoading( false );\n\t};\n\n\tconst onClearMedia = useCallback( () => {\n\t\tsetAttributes( {\n\t\t\tfocalPoint: undefined,\n\t\t\thasParallax: undefined,\n\t\t\tid: undefined,\n\t\t\turl: undefined,\n\t\t} );\n\t\tcloseSettingsBottomSheet();\n\t}, [ closeSettingsBottomSheet ] );\n\n\tfunction setColor( color ) {\n\t\tsetAttributes( {\n\t\t\t// clear all related attributes (only one should be set)\n\t\t\toverlayColor: undefined,\n\t\t\tcustomOverlayColor: color,\n\t\t\tgradient: undefined,\n\t\t\tcustomGradient: undefined,\n\t\t} );\n\t}\n\n\tfunction openColorPicker() {\n\t\tselectBlock();\n\t\tsetCustomColorPickerShowing( true );\n\t\topenGeneralSidebar();\n\t}\n\n\tconst backgroundColor = getStylesFromColorScheme(\n\t\tstyles.backgroundSolid,\n\t\tstyles.backgroundSolidDark\n\t);\n\n\tconst overlayStyles = [\n\t\tstyles.overlay,\n\t\turl && { opacity: dimRatio / 100 },\n\t\t! gradientValue && {\n\t\t\tbackgroundColor:\n\t\t\t\tcustomOverlayColor ||\n\t\t\t\toverlayColor?.color ||\n\t\t\t\tstyle?.color?.background ||\n\t\t\t\tstyles.overlay?.color,\n\t\t},\n\t\t// While we don't support theme colors we add a default bg color\n\t\t! overlayColor.color && ! url ? backgroundColor : {},\n\t\tisImage &&\n\t\t\tisParentSelected &&\n\t\t\t! isUploadInProgress &&\n\t\t\t! didUploadFail &&\n\t\t\tstyles.overlaySelected,\n\t];\n\n\tconst placeholderIconStyle = getStylesFromColorScheme(\n\t\tstyles.icon,\n\t\tstyles.iconDark\n\t);\n\n\tconst placeholderIcon = <Icon icon={ icon } { ...placeholderIconStyle } />;\n\n\tconst toolbarControls = ( open ) => (\n\t\t<BlockControls group=\"other\">\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ __( 'Edit cover media' ) }\n\t\t\t\ticon={ replace }\n\t\t\t\tonClick={ open }\n\t\t\t/>\n\t\t</BlockControls>\n\t);\n\n\tconst accessibilityHint =\n\t\tPlatform.OS === 'ios'\n\t\t\t? __( 'Double tap to open Action Sheet to add image or video' )\n\t\t\t: __( 'Double tap to open Bottom Sheet to add image or video' );\n\n\tconst addMediaButton = () => (\n\t\t<TouchableWithoutFeedback\n\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\taccessibilityLabel={ __( 'Add image or video' ) }\n\t\t\taccessibilityRole=\"button\"\n\t\t\tonPress={ openMediaOptionsRef.current }\n\t\t>\n\t\t\t<View style={ styles.selectImageContainer }>\n\t\t\t\t<View style={ styles.selectImage }>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tsize={ 16 }\n\t\t\t\t\t\ticon={ image }\n\t\t\t\t\t\t{ ...styles.selectImageIcon }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n\n\tconst onBottomSheetClosed = useCallback( () => {\n\t\tInteractionManager.runAfterInteractions( () => {\n\t\t\tsetCustomColorPickerShowing( false );\n\t\t} );\n\t}, [] );\n\n\tconst colorPickerControls = (\n\t\t<InspectorControls>\n\t\t\t<BottomSheetConsumer>\n\t\t\t\t{ ( {\n\t\t\t\t\tshouldEnableBottomSheetScroll,\n\t\t\t\t\tshouldEnableBottomSheetMaxHeight,\n\t\t\t\t\tonHandleClosingBottomSheet,\n\t\t\t\t\tonHandleHardwareButtonPress,\n\t\t\t\t\tisBottomSheetContentScrolling,\n\t\t\t\t} ) => (\n\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshouldEnableBottomSheetMaxHeight={\n\t\t\t\t\t\t\tshouldEnableBottomSheetMaxHeight\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tonNavigationBack={ closeSettingsBottomSheet }\n\t\t\t\t\t\tonHandleClosingBottomSheet={\n\t\t\t\t\t\t\tonHandleClosingBottomSheet\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonHandleHardwareButtonPress={\n\t\t\t\t\t\t\tonHandleHardwareButtonPress\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonBottomSheetClosed={ onBottomSheetClosed }\n\t\t\t\t\t\tisBottomSheetContentScrolling={\n\t\t\t\t\t\t\tisBottomSheetContentScrolling\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottomLabelText={ __( 'Select a color' ) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BottomSheetConsumer>\n\t\t</InspectorControls>\n\t);\n\n\tconst renderContent = ( getMediaOptions ) => (\n\t\t<>\n\t\t\t{ renderBackground( getMediaOptions ) }\n\t\t\t{ isParentSelected && hasOnlyColorBackground && addMediaButton() }\n\t\t</>\n\t);\n\n\tconst renderBackground = ( getMediaOptions ) => (\n\t\t<TouchableWithoutFeedback\n\t\t\taccessible={ ! isParentSelected }\n\t\t\tonPress={ onMediaPressed }\n\t\t\tonLongPress={ openMediaOptionsRef.current }\n\t\t\tdisabled={ ! isParentSelected }\n\t\t>\n\t\t\t<View style={ [ styles.background, backgroundColor ] }>\n\t\t\t\t{ getMediaOptions() }\n\t\t\t\t{ isParentSelected &&\n\t\t\t\t\tbackgroundType === VIDEO_BACKGROUND_TYPE &&\n\t\t\t\t\ttoolbarControls( openMediaOptionsRef.current ) }\n\t\t\t\t<MediaUploadProgress\n\t\t\t\t\tmediaId={ id }\n\t\t\t\t\tonUpdateMediaProgress={ () => {\n\t\t\t\t\t\tsetIsUploadInProgress( true );\n\t\t\t\t\t} }\n\t\t\t\t\tonFinishMediaUploadWithSuccess={ ( {\n\t\t\t\t\t\tmediaServerId,\n\t\t\t\t\t\tmediaUrl,\n\t\t\t\t\t} ) => {\n\t\t\t\t\t\tsetIsUploadInProgress( false );\n\t\t\t\t\t\tsetDidUploadFail( false );\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tid: mediaServerId,\n\t\t\t\t\t\t\turl: mediaUrl,\n\t\t\t\t\t\t\tbackgroundType,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tonFinishMediaUploadWithFailure={ () => {\n\t\t\t\t\t\tsetIsUploadInProgress( false );\n\t\t\t\t\t\tsetDidUploadFail( true );\n\t\t\t\t\t} }\n\t\t\t\t\tonMediaUploadStateReset={ () => {\n\t\t\t\t\t\tsetIsUploadInProgress( false );\n\t\t\t\t\t\tsetDidUploadFail( false );\n\t\t\t\t\t\tsetAttributes( { id: undefined, url: undefined } );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\n\t\t\t\t{ IMAGE_BACKGROUND_TYPE === backgroundType && (\n\t\t\t\t\t<View style={ styles.imageContainer }>\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\teditButton={ false }\n\t\t\t\t\t\t\tfocalPoint={\n\t\t\t\t\t\t\t\tfocalPoint || IMAGE_DEFAULT_FOCAL_POINT\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisSelected={ isParentSelected }\n\t\t\t\t\t\t\tisUploadFailed={ didUploadFail }\n\t\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\t\t\tonSelectMediaUploadOption={ onSelectMedia }\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptionsRef.current }\n\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t\twidth={ styles.image?.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\n\t\t\t\t{ VIDEO_BACKGROUND_TYPE === backgroundType && (\n\t\t\t\t\t<Video\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tdisableFocus\n\t\t\t\t\t\trepeat\n\t\t\t\t\t\tresizeMode={ 'cover' }\n\t\t\t\t\t\tsource={ { uri: url } }\n\t\t\t\t\t\tonLoad={ onVideoLoad }\n\t\t\t\t\t\tonLoadStart={ onVideoLoadStart }\n\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\tstyles.background,\n\t\t\t\t\t\t\t// Hide Video component since it has black background while loading the source\n\t\t\t\t\t\t\t{ opacity: isVideoLoading ? 0 : 1 },\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n\n\tif ( ! hasBackground || isCustomColorPickerShowing ) {\n\t\treturn (\n\t\t\t<View>\n\t\t\t\t{ isCustomColorPickerShowing && colorPickerControls }\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\theight={\n\t\t\t\t\t\tstyles.mediaPlaceholderEmptyStateContainer?.height\n\t\t\t\t\t}\n\t\t\t\t\tbackgroundColor={ customOverlayColor }\n\t\t\t\t\thideContent={\n\t\t\t\t\t\tcustomOverlayColor !== '' &&\n\t\t\t\t\t\tcustomOverlayColor !== undefined\n\t\t\t\t\t}\n\t\t\t\t\ticon={ placeholderIcon }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'Cover' ),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ styles.colorPaletteWrapper }\n\t\t\t\t\t\tpointerEvents={\n\t\t\t\t\t\t\tisScreenReaderEnabled ? 'none' : 'auto'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<BottomSheetConsumer>\n\t\t\t\t\t\t\t{ ( { shouldEnableBottomSheetScroll } ) => (\n\t\t\t\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\t\t\t\tcustomColorIndicatorStyles={\n\t\t\t\t\t\t\t\t\t\tstyles.paletteColorIndicator\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcustomIndicatorWrapperStyles={\n\t\t\t\t\t\t\t\t\t\tstyles.paletteCustomIndicatorWrapper\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\t\t\t\tonCustomPress={ openColorPicker }\n\t\t\t\t\t\t\t\t\tdefaultSettings={ coverDefaultPalette }\n\t\t\t\t\t\t\t\t\tshouldShowCustomLabel={ false }\n\t\t\t\t\t\t\t\t\tshouldShowCustomVerticalSeparator={ false }\n\t\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</BottomSheetConsumer>\n\t\t\t\t\t</View>\n\t\t\t\t</MediaPlaceholder>\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View style={ styles.backgroundContainer }>\n\t\t\t{ isSelected && (\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<Controls\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tdidUploadFail={ didUploadFail }\n\t\t\t\t\t\thasOnlyColorBackground={ hasOnlyColorBackground }\n\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\t\tonClearMedia={ onClearMedia }\n\t\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t/>\n\t\t\t\t</InspectorControls>\n\t\t\t) }\n\n\t\t\t<View\n\t\t\t\tpointerEvents=\"box-none\"\n\t\t\t\tstyle={ [ styles.content, { minHeight: convertedMinHeight } ] }\n\t\t\t>\n\t\t\t\t<InnerBlocks\n\t\t\t\t\ttemplate={ INNER_BLOCKS_TEMPLATE }\n\t\t\t\t\ttemplateInsertUpdatesSelection\n\t\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\t/>\n\t\t\t</View>\n\n\t\t\t<View pointerEvents=\"none\" style={ styles.overlayContainer }>\n\t\t\t\t<View style={ overlayStyles }>\n\t\t\t\t\t{ gradientValue && (\n\t\t\t\t\t\t<Gradient\n\t\t\t\t\t\t\tgradientValue={ gradientValue }\n\t\t\t\t\t\t\tstyle={ styles.background }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t</View>\n\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\tisReplacingMedia={ ! hasOnlyColorBackground }\n\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\topenMediaOptionsRef.current = open;\n\t\t\t\t\treturn renderContent( getMediaOptions );\n\t\t\t\t} }\n\t\t\t/>\n\n\t\t\t{ isImage &&\n\t\t\t\turl &&\n\t\t\t\topenMediaOptionsRef.current &&\n\t\t\t\tisParentSelected &&\n\t\t\t\t! isUploadInProgress &&\n\t\t\t\t! didUploadFail && (\n\t\t\t\t\t<View style={ styles.imageEditButton }>\n\t\t\t\t\t\t<ImageEditingButton\n\t\t\t\t\t\t\tonSelectMediaUploadOption={ onSelectMedia }\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptionsRef.current }\n\t\t\t\t\t\t\tpickerOptions={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdestructiveButton: true,\n\t\t\t\t\t\t\t\t\tid: 'clearMedia',\n\t\t\t\t\t\t\t\t\tlabel: __( 'Clear Media' ),\n\t\t\t\t\t\t\t\t\tonPress: onClearMedia,\n\t\t\t\t\t\t\t\t\tseparated: true,\n\t\t\t\t\t\t\t\t\tvalue: 'clearMedia',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\n\t\t\t{ shouldShowFailure && (\n\t\t\t\t<View\n\t\t\t\t\tpointerEvents=\"none\"\n\t\t\t\t\tstyle={ styles.uploadFailedContainer }\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles.uploadFailed }>\n\t\t\t\t\t\t<Icon icon={ warning } { ...styles.uploadFailedIcon } />\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n};\n\nexport default compose( [\n\twithColors( { overlayColor: 'background-color' } ),\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getSelectedBlockClientId } = select( blockEditorStore );\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\n\t\tconst { getSettings } = select( blockEditorStore );\n\n\t\treturn {\n\t\t\tsettings: getSettings(),\n\t\t\tisParentSelected: selectedBlockClientId === clientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { openGeneralSidebar } = dispatch( editPostStore );\n\t\tconst { selectBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\topenGeneralSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t\tcloseSettingsBottomSheet() {\n\t\t\t\tdispatch( editPostStore ).closeGeneralSidebar();\n\t\t\t},\n\t\t\tselectBlock: () => selectBlock( clientId ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( Cover );\n"]}