{"version":3,"sources":["@wordpress/block-library/src/gallery/edit-wrapper.js"],"names":["GalleryEditWrapper","props","attributes","clientId","innerBlockImages","select","blockEditorStore","getBlock","innerBlocks","__unstableGalleryWithImageBlocks","settings","getSettings","hasNewVersionContent","length","hasOldVersionContent","ids","images"],"mappings":";;;;;;;;;;;AAGA;;AACA;;AAKA;;AACA;;AAVA;AACA;AACA;;AAIA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACe,SAASA,kBAAT,CAA6BC,KAA7B,EAAqC;AAAA;;AACnD,QAAM;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAA2BF,KAAjC;AAEA,QAAMG,gBAAgB,GAAG,qBACtBC,MAAF,IAAc;AAAA;;AACb,+BAAOA,MAAM,CAAEC,kBAAF,CAAN,CAA2BC,QAA3B,CAAqCJ,QAArC,CAAP,qDAAO,iBAAiDK,WAAxD;AACA,GAHuB,EAIxB,CAAEL,QAAF,CAJwB,CAAzB;;AAOA,QAAMM,gCAAgC,GAAG,qBAAaJ,MAAF,IAAc;AACjE,UAAMK,QAAQ,GAAGL,MAAM,CAAEC,kBAAF,CAAN,CAA2BK,WAA3B,EAAjB;AACA,WAAOD,QAAQ,CAACD,gCAAhB;AACA,GAHwC,EAGtC,EAHsC,CAAzC,CAVmD,CAenD;AACA;AACA;;;AACA,QAAMG,oBAAoB,GAAG,CAAC,EAAER,gBAAF,aAAEA,gBAAF,eAAEA,gBAAgB,CAAES,MAApB,CAA9B;AACA,QAAMC,oBAAoB,GACzB,KAAIZ,UAAJ,aAAIA,UAAJ,0CAAIA,UAAU,CAAEa,GAAhB,oDAAI,gBAAiBF,MAArB,KAA+B,KAAIX,UAAJ,aAAIA,UAAJ,6CAAIA,UAAU,CAAEc,MAAhB,uDAAI,mBAAoBH,MAAxB,CADhC;;AAEA,MACCC,oBAAoB,IAClB,CAAEF,oBAAF,IAA0B,CAAEH,gCAF/B,EAGE;AACD,WAAO,4BAAC,cAAD,EAA6BR,KAA7B,CAAP;AACA;;AAED,SAAO,4BAAC,aAAD,EAA0BA,KAA1B,CAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport EditWithInnerBlocks from './edit';\nimport EditWithoutInnerBlocks from './v1/edit';\n\n/*\n * Using a wrapper around the logic to load the edit for v1 of Gallery block\n * or the refactored version with InnerBlocks. This is to prevent conditional\n * use of hooks lint errors if adding this logic to the top of the edit component.\n */\nexport default function GalleryEditWrapper( props ) {\n\tconst { attributes, clientId } = props;\n\n\tconst innerBlockImages = useSelect(\n\t\t( select ) => {\n\t\t\treturn select( blockEditorStore ).getBlock( clientId )?.innerBlocks;\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst __unstableGalleryWithImageBlocks = useSelect( ( select ) => {\n\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\treturn settings.__unstableGalleryWithImageBlocks;\n\t}, [] );\n\n\t// This logic is used to infer version information from content with higher\n\t// precedence than the flag. New galleries (and existing empty galleries) will\n\t// honor the flag.\n\tconst hasNewVersionContent = !! innerBlockImages?.length;\n\tconst hasOldVersionContent =\n\t\t0 < attributes?.ids?.length || 0 < attributes?.images?.length;\n\tif (\n\t\thasOldVersionContent ||\n\t\t( ! hasNewVersionContent && ! __unstableGalleryWithImageBlocks )\n\t) {\n\t\treturn <EditWithoutInnerBlocks { ...props } />;\n\t}\n\n\treturn <EditWithInnerBlocks { ...props } />;\n}\n"]}