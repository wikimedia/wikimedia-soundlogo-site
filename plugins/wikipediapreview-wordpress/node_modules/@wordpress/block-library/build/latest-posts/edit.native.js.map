{"version":3,"sources":["@wordpress/block-library/src/latest-posts/edit.native.js"],"names":["LatestPostsEdit","Component","constructor","arguments","state","categoriesList","onSetDisplayPostContent","bind","onSetDisplayPostContentRadio","onSetExcerptLength","onSetDisplayPostDate","onSetOrder","onSetOrderBy","onSetPostsToShow","onSetCategories","getInspectorControls","componentDidMount","isStillMounted","fetchRequest","path","then","setState","catch","componentWillUnmount","value","setAttributes","props","displayPostContent","displayPostContentRadio","excerptLength","displayPostDate","order","orderBy","postsToShow","categories","toString","undefined","attributes","displayExcerptPostContent","MIN_EXCERPT_LENGTH","MAX_EXCERPT_LENGTH","Number","__DEV__","render","blockTitle","getStylesFromColorScheme","openGeneralSidebar","isSelected","blockStyle","styles","latestPostBlock","latestPostBlockDark","iconStyle","latestPostBlockIcon","latestPostBlockIconDark","titleStyle","latestPostBlockMessage","latestPostBlockMessageDark","icon","latestPostBlockSubtitle","select","name","blockType","blocksStore","getBlockType","title","dispatch","withPreferredColorScheme"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableWithoutFeedback, View, Text } from 'react-native';\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { postList as icon } from '@wordpress/icons';\nimport { InspectorControls } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport {\n\tIcon,\n\tPanelBody,\n\tToggleControl,\n\tRangeControl,\n\tQueryControls,\n} from '@wordpress/components';\nimport { store as blocksStore } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport { MIN_EXCERPT_LENGTH, MAX_EXCERPT_LENGTH } from './constants';\n\nclass LatestPostsEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tcategoriesList: [],\n\t\t};\n\t\tthis.onSetDisplayPostContent = this.onSetDisplayPostContent.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onSetDisplayPostContentRadio = this.onSetDisplayPostContentRadio.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onSetExcerptLength = this.onSetExcerptLength.bind( this );\n\t\tthis.onSetDisplayPostDate = this.onSetDisplayPostDate.bind( this );\n\t\tthis.onSetOrder = this.onSetOrder.bind( this );\n\t\tthis.onSetOrderBy = this.onSetOrderBy.bind( this );\n\t\tthis.onSetPostsToShow = this.onSetPostsToShow.bind( this );\n\t\tthis.onSetCategories = this.onSetCategories.bind( this );\n\t\tthis.getInspectorControls = this.getInspectorControls.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.isStillMounted = true;\n\t\tthis.fetchRequest = apiFetch( { path: '/wp/v2/categories' } )\n\t\t\t.then( ( categoriesList ) => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tcategoriesList: isEmpty( categoriesList )\n\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t: categoriesList,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList: [] } );\n\t\t\t\t}\n\t\t\t} );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.isStillMounted = false;\n\t}\n\n\tonSetDisplayPostContent( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { displayPostContent: value } );\n\t}\n\n\tonSetDisplayPostContentRadio( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( {\n\t\t\tdisplayPostContentRadio: value ? 'excerpt' : 'full_post',\n\t\t} );\n\t}\n\n\tonSetExcerptLength( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { excerptLength: value } );\n\t}\n\n\tonSetDisplayPostDate( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { displayPostDate: value } );\n\t}\n\n\tonSetOrder( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { order: value } );\n\t}\n\n\tonSetOrderBy( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { orderBy: value } );\n\t}\n\n\tonSetPostsToShow( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { postsToShow: value } );\n\t}\n\n\tonSetCategories( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( {\n\t\t\tcategories: '' !== value ? value.toString() : undefined,\n\t\t} );\n\t}\n\n\tgetInspectorControls() {\n\t\tconst { attributes } = this.props;\n\t\tconst {\n\t\t\tdisplayPostContent,\n\t\t\tdisplayPostContentRadio,\n\t\t\texcerptLength,\n\t\t\tdisplayPostDate,\n\t\t\torder,\n\t\t\torderBy,\n\t\t\tpostsToShow,\n\t\t\tcategories,\n\t\t} = attributes;\n\n\t\tconst { categoriesList } = this.state;\n\t\tconst displayExcerptPostContent = displayPostContentRadio === 'excerpt';\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Post content settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Show post content' ) }\n\t\t\t\t\t\tchecked={ displayPostContent }\n\t\t\t\t\t\tonChange={ this.onSetDisplayPostContent }\n\t\t\t\t\t/>\n\t\t\t\t\t{ displayPostContent && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __( 'Only show excerpt' ) }\n\t\t\t\t\t\t\tchecked={ displayExcerptPostContent }\n\t\t\t\t\t\t\tonChange={ this.onSetDisplayPostContentRadio }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ displayPostContent && displayExcerptPostContent && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Excerpt length (words)' ) }\n\t\t\t\t\t\t\tvalue={ excerptLength }\n\t\t\t\t\t\t\tonChange={ this.onSetExcerptLength }\n\t\t\t\t\t\t\tmin={ MIN_EXCERPT_LENGTH }\n\t\t\t\t\t\t\tmax={ MAX_EXCERPT_LENGTH }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Post meta settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display post date' ) }\n\t\t\t\t\t\tchecked={ displayPostDate }\n\t\t\t\t\t\tonChange={ this.onSetDisplayPostDate }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={ __( 'Sorting and filtering' ) }>\n\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t{ ...{ order, orderBy } }\n\t\t\t\t\t\tnumberOfItems={ postsToShow }\n\t\t\t\t\t\tcategoriesList={ categoriesList }\n\t\t\t\t\t\tselectedCategoryId={\n\t\t\t\t\t\t\tundefined !== categories ? Number( categories ) : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonOrderChange={ this.onSetOrder }\n\t\t\t\t\t\tonOrderByChange={ this.onSetOrderBy }\n\t\t\t\t\t\tonCategoryChange={\n\t\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\t\t__DEV__ ? this.onSetCategories : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonNumberOfItemsChange={ this.onSetPostsToShow }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tblockTitle,\n\t\t\tgetStylesFromColorScheme,\n\t\t\topenGeneralSidebar,\n\t\t\tisSelected,\n\t\t} = this.props;\n\n\t\tconst blockStyle = getStylesFromColorScheme(\n\t\t\tstyles.latestPostBlock,\n\t\t\tstyles.latestPostBlockDark\n\t\t);\n\n\t\tconst iconStyle = getStylesFromColorScheme(\n\t\t\tstyles.latestPostBlockIcon,\n\t\t\tstyles.latestPostBlockIconDark\n\t\t);\n\n\t\tconst titleStyle = getStylesFromColorScheme(\n\t\t\tstyles.latestPostBlockMessage,\n\t\t\tstyles.latestPostBlockMessageDark\n\t\t);\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessible={ ! isSelected }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\tonPress={ openGeneralSidebar }\n\t\t\t>\n\t\t\t\t<View style={ blockStyle }>\n\t\t\t\t\t{ isSelected && this.getInspectorControls() }\n\t\t\t\t\t<Icon icon={ icon } { ...iconStyle } />\n\t\t\t\t\t<Text style={ titleStyle }>{ blockTitle }</Text>\n\t\t\t\t\t<Text style={ styles.latestPostBlockSubtitle }>\n\t\t\t\t\t\t{ __( 'CUSTOMIZE' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { name } ) => {\n\t\tconst blockType = select( blocksStore ).getBlockType( name );\n\t\treturn {\n\t\t\tblockTitle: blockType?.title || name,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\n\t\treturn {\n\t\t\topenGeneralSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( LatestPostsEdit );\n"]}