{"version":3,"sources":["@wordpress/block-library/src/button/edit.native.js"],"names":["MIN_BORDER_RADIUS_VALUE","MAX_BORDER_RADIUS_VALUE","INITIAL_MAX_WIDTH","MIN_WIDTH","MIN_WIDTH_MARGINS","styles","button75","marginLeft","button50","button25","WidthPanel","selectedWidth","setAttributes","handleChange","newWidth","width","undefined","options","value","label","ButtonEdit","Component","constructor","props","onChangeText","bind","onChangeBorderRadius","onChangeBorderRadiusUnit","onClearSettings","onLayout","onSetMaxWidth","dismissSheet","onShowLinkSettings","onHideLinkSettings","onToggleButtonFocus","onPlaceholderTextWidth","setRef","onRemove","getPlaceholderWidth","borderRadius","attributes","style","border","radius","valueUnit","state","maxWidth","isLinkSheetVisible","isButtonFocused","placeholderTextWidth","borderRadiusUnit","linkSettingsActions","onPress","linkSettingsOptions","url","placeholder","autoFocus","autoFill","openInNewTab","linkRel","noFocusLinkSettingOptions","componentDidMount","componentDidUpdate","prevProps","prevState","isSelected","editorSidebarOpened","parentWidth","Platform","OS","richTextRef","blur","AccessibilityInfo","isScreenReaderEnabled","then","enabled","focus","getBackgroundColor","colors","gradients","backgroundColor","gradient","gradientValue","colorProps","colorObject","color","background","defaultButton","getTextColor","textColor","text","newRadius","newStyle","getNewStyle","newRadiusUnit","getBorderRadiusValue","setState","radiusUnit","rel","linkTarget","nativeEvent","layout","isParentWidthDidChange","marginRight","spacing","isParentWidthChanged","isWidthChanged","numOfButtons","onDeleteBlock","onReplace","closeSettingsBottomSheet","getLinkSettings","isCompatibleWithSettings","richText","placeholderText","textWidth","lines","Math","min","defaultBorderRadius","valueAndUnit","Number","isInteger","parseInt","valueToConvert","parseFloat","render","clientId","mergeBlocks","buttonStyle","align","paddingTop","borderWidth","borderRadiusValue","buttonBorderRadiusValue","floor","outlineBorderRadius","minWidth","isFixedWidth","outline","borderColor","richTextStyle","paddingLeft","paddingRight","placeholderTextColor","link","CSS_UNITS","withInstanceId","withGradient","select","isEditorSidebarOpened","getBlockCount","getBlockRootClientId","getSettings","blockEditorStore","parentId","settings","dispatch","closeGeneralSidebar"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, AccessibilityInfo, Platform, Text } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { __, _x } from '@wordpress/i18n';\nimport {\n\tRichText,\n\tInspectorControls,\n\tBlockControls,\n\twithGradient,\n\tstore as blockEditorStore,\n\tgetColorObjectByAttributeValues,\n\tgetGradientValueBySlug,\n\t__experimentalGetColorClassesAndStyles as getColorClassesAndStyles,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tToolbarGroup,\n\tToolbarButton,\n\tLinkSettingsNavigation,\n\tUnitControl,\n\tgetValueAndUnit,\n\tBottomSheetSelectControl,\n\tCSS_UNITS,\n\tfilterUnitsWithSettings,\n} from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { link } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport richTextStyle from './rich-text.scss';\nimport styles from './editor.scss';\nimport ColorBackground from './color-background';\n\nconst MIN_BORDER_RADIUS_VALUE = 0;\nconst MAX_BORDER_RADIUS_VALUE = 50;\nconst INITIAL_MAX_WIDTH = 108;\nconst MIN_WIDTH = 40;\n// Map of the percentage width to pixel subtraction that make the buttons fit nicely into columns.\nconst MIN_WIDTH_MARGINS = {\n\t100: 0,\n\t75: styles.button75?.marginLeft,\n\t50: styles.button50?.marginLeft,\n\t25: styles.button25?.marginLeft,\n};\n\nfunction WidthPanel( { selectedWidth, setAttributes } ) {\n\tfunction handleChange( newWidth ) {\n\t\t// Check if we are toggling the width off\n\t\tlet width = selectedWidth === newWidth ? undefined : newWidth;\n\t\tif ( newWidth === 'auto' ) {\n\t\t\twidth = undefined;\n\t\t}\n\t\t// Update attributes\n\t\tsetAttributes( { width } );\n\t}\n\n\tconst options = [\n\t\t{ value: 'auto', label: __( 'Auto' ) },\n\t\t{ value: 25, label: '25%' },\n\t\t{ value: 50, label: '50%' },\n\t\t{ value: 75, label: '75%' },\n\t\t{ value: 100, label: '100%' },\n\t];\n\n\tif ( ! selectedWidth ) {\n\t\tselectedWidth = 'auto';\n\t}\n\n\treturn (\n\t\t<PanelBody title={ __( 'Width Settings' ) }>\n\t\t\t<BottomSheetSelectControl\n\t\t\t\tlabel={ __( 'Button width' ) }\n\t\t\t\tvalue={ selectedWidth }\n\t\t\t\tonChange={ handleChange }\n\t\t\t\toptions={ options }\n\t\t\t/>\n\t\t</PanelBody>\n\t);\n}\n\nclass ButtonEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onChangeText = this.onChangeText.bind( this );\n\t\tthis.onChangeBorderRadius = this.onChangeBorderRadius.bind( this );\n\t\tthis.onChangeBorderRadiusUnit = this.onChangeBorderRadiusUnit.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onClearSettings = this.onClearSettings.bind( this );\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.onSetMaxWidth = this.onSetMaxWidth.bind( this );\n\t\tthis.dismissSheet = this.dismissSheet.bind( this );\n\t\tthis.onShowLinkSettings = this.onShowLinkSettings.bind( this );\n\t\tthis.onHideLinkSettings = this.onHideLinkSettings.bind( this );\n\t\tthis.onToggleButtonFocus = this.onToggleButtonFocus.bind( this );\n\t\tthis.onPlaceholderTextWidth = this.onPlaceholderTextWidth.bind( this );\n\t\tthis.setRef = this.setRef.bind( this );\n\t\tthis.onRemove = this.onRemove.bind( this );\n\t\tthis.getPlaceholderWidth = this.getPlaceholderWidth.bind( this );\n\n\t\tconst borderRadius = props?.attributes?.style?.border?.radius;\n\t\tconst { valueUnit = 'px' } = getValueAndUnit( borderRadius ) || {};\n\n\t\tthis.state = {\n\t\t\tmaxWidth: INITIAL_MAX_WIDTH,\n\t\t\tisLinkSheetVisible: false,\n\t\t\tisButtonFocused: true,\n\t\t\tplaceholderTextWidth: 0,\n\t\t\tborderRadiusUnit: valueUnit,\n\t\t};\n\n\t\tthis.linkSettingsActions = [\n\t\t\t{\n\t\t\t\tlabel: __( 'Remove link' ),\n\t\t\t\tonPress: this.onClearSettings,\n\t\t\t},\n\t\t];\n\n\t\tthis.linkSettingsOptions = {\n\t\t\turl: {\n\t\t\t\tlabel: __( 'Button Link URL' ),\n\t\t\t\tplaceholder: __( 'Add URL' ),\n\t\t\t\tautoFocus: true,\n\t\t\t\tautoFill: true,\n\t\t\t},\n\t\t\topenInNewTab: {\n\t\t\t\tlabel: __( 'Open in new tab' ),\n\t\t\t},\n\t\t\tlinkRel: {\n\t\t\t\tlabel: __( 'Link Rel' ),\n\t\t\t\tplaceholder: _x(\n\t\t\t\t\t'None',\n\t\t\t\t\t'Link rel attribute value placeholder'\n\t\t\t\t),\n\t\t\t},\n\t\t};\n\n\t\tthis.noFocusLinkSettingOptions = {\n\t\t\t...this.linkSettingsOptions,\n\t\t\turl: {\n\t\t\t\t...this.linkSettingsOptions.url,\n\t\t\t\tautoFocus: false,\n\t\t\t},\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.onSetMaxWidth();\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { isSelected, editorSidebarOpened, parentWidth } = this.props;\n\t\tconst { isLinkSheetVisible, isButtonFocused } = this.state;\n\n\t\tif ( isSelected && ! prevProps.isSelected ) {\n\t\t\tthis.onToggleButtonFocus( true );\n\t\t}\n\n\t\tif ( prevProps.parentWidth !== parentWidth ) {\n\t\t\tthis.onSetMaxWidth( null, true );\n\t\t}\n\n\t\t// Blur `RichText` on Android when link settings sheet or button settings sheet is opened,\n\t\t// to avoid flashing caret after closing one of them\n\t\tif (\n\t\t\t( ! prevProps.editorSidebarOpened && editorSidebarOpened ) ||\n\t\t\t( ! prevState.isLinkSheetVisible && isLinkSheetVisible )\n\t\t) {\n\t\t\tif ( Platform.OS === 'android' && this.richTextRef ) {\n\t\t\t\tthis.richTextRef.blur();\n\t\t\t\tthis.onToggleButtonFocus( false );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.richTextRef ) {\n\t\t\tif ( ! isSelected && isButtonFocused ) {\n\t\t\t\tthis.onToggleButtonFocus( false );\n\t\t\t}\n\n\t\t\tif ( isSelected && ! isButtonFocused ) {\n\t\t\t\tAccessibilityInfo.isScreenReaderEnabled().then( ( enabled ) => {\n\t\t\t\t\tif ( enabled ) {\n\t\t\t\t\t\tthis.onToggleButtonFocus( true );\n\t\t\t\t\t\tthis.richTextRef.focus();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetBackgroundColor() {\n\t\tconst { attributes, colors, gradients, style } = this.props;\n\t\tconst { backgroundColor, gradient } = attributes;\n\n\t\t// Return named gradient value if available.\n\t\tconst gradientValue = getGradientValueBySlug( gradients, gradient );\n\n\t\tif ( gradientValue ) {\n\t\t\treturn gradientValue;\n\t\t}\n\n\t\tconst colorProps = getColorClassesAndStyles( attributes );\n\n\t\t// Retrieve named color object to force inline styles for themes that\n\t\t// do not load their color stylesheets in the editor.\n\t\tconst colorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\tbackgroundColor\n\t\t);\n\n\t\treturn (\n\t\t\tcolorObject?.color ||\n\t\t\tcolorProps.style?.backgroundColor ||\n\t\t\tcolorProps.style?.background ||\n\t\t\tstyle?.backgroundColor ||\n\t\t\tstyles.defaultButton.backgroundColor\n\t\t);\n\t}\n\n\tgetTextColor() {\n\t\tconst { attributes, colors, style } = this.props;\n\t\tconst colorProps = getColorClassesAndStyles( attributes );\n\n\t\t// Retrieve named color object to force inline styles for themes that\n\t\t// do not load their color stylesheets in the editor.\n\t\tconst colorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\tattributes.textColor\n\t\t);\n\n\t\treturn (\n\t\t\tcolorObject?.color ||\n\t\t\tcolorProps.style?.color ||\n\t\t\tstyle?.color ||\n\t\t\tstyles.defaultButton.color\n\t\t);\n\t}\n\n\tonChangeText( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { text: value } );\n\t}\n\n\tonChangeBorderRadius( newRadius ) {\n\t\tconst { setAttributes, attributes } = this.props;\n\t\tconst { borderRadiusUnit } = this.state;\n\t\tconst { style } = attributes;\n\t\tconst newStyle = this.getNewStyle( style, newRadius, borderRadiusUnit );\n\n\t\tsetAttributes( { style: newStyle } );\n\t}\n\n\tonChangeBorderRadiusUnit( newRadiusUnit ) {\n\t\tconst { setAttributes, attributes } = this.props;\n\t\tconst { style } = attributes;\n\t\tconst borderRadius = this.getBorderRadiusValue(\n\t\t\tattributes?.style?.border?.radius\n\t\t);\n\t\tconst newStyle = this.getNewStyle( style, borderRadius, newRadiusUnit );\n\t\tsetAttributes( { style: newStyle } );\n\t\tthis.setState( { borderRadiusUnit: newRadiusUnit } );\n\t}\n\n\tgetNewStyle( style, radius, radiusUnit ) {\n\t\treturn {\n\t\t\t...style,\n\t\t\tborder: {\n\t\t\t\t...style?.border,\n\t\t\t\tradius: `${ radius }${ radiusUnit }`, // Store the value with the unit so that it works as expected.\n\t\t\t},\n\t\t};\n\t}\n\n\tonShowLinkSettings() {\n\t\tthis.setState( { isLinkSheetVisible: true } );\n\t}\n\n\tonHideLinkSettings() {\n\t\tthis.setState( { isLinkSheetVisible: false } );\n\t}\n\n\tonToggleButtonFocus( value ) {\n\t\tif ( value !== this.state.isButtonFocused ) {\n\t\t\tthis.setState( { isButtonFocused: value } );\n\t\t}\n\t}\n\n\tonClearSettings() {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\turl: '',\n\t\t\trel: '',\n\t\t\tlinkTarget: '',\n\t\t} );\n\n\t\tthis.onHideLinkSettings();\n\t}\n\n\tonLayout( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tthis.onSetMaxWidth( width );\n\t}\n\n\tonSetMaxWidth( width, isParentWidthDidChange = false ) {\n\t\tconst { maxWidth } = this.state;\n\t\tconst { parentWidth } = this.props;\n\t\tconst { marginRight: spacing } = styles.defaultButton;\n\n\t\tconst isParentWidthChanged = isParentWidthDidChange\n\t\t\t? isParentWidthDidChange\n\t\t\t: maxWidth !== parentWidth;\n\t\tconst isWidthChanged = maxWidth !== width;\n\n\t\tif ( parentWidth && ! width && isParentWidthChanged ) {\n\t\t\tthis.setState( {\n\t\t\t\tmaxWidth: parentWidth - spacing,\n\t\t\t} );\n\t\t} else if ( ! parentWidth && width && isWidthChanged ) {\n\t\t\tthis.setState( { maxWidth: width - spacing } );\n\t\t}\n\t}\n\n\tonRemove() {\n\t\tconst { numOfButtons, onDeleteBlock, onReplace } = this.props;\n\n\t\tif ( numOfButtons === 1 ) {\n\t\t\tonDeleteBlock();\n\t\t} else {\n\t\t\tonReplace( [] );\n\t\t}\n\t}\n\n\tdismissSheet() {\n\t\tthis.onHideLinkSettings();\n\t\tthis.props.closeSettingsBottomSheet();\n\t}\n\n\tgetLinkSettings( isCompatibleWithSettings ) {\n\t\tconst { isLinkSheetVisible } = this.state;\n\t\tconst { attributes, setAttributes } = this.props;\n\t\treturn (\n\t\t\t<LinkSettingsNavigation\n\t\t\t\tisVisible={ isLinkSheetVisible }\n\t\t\t\turl={ attributes.url }\n\t\t\t\trel={ attributes.rel }\n\t\t\t\tlinkTarget={ attributes.linkTarget }\n\t\t\t\tonClose={ this.dismissSheet }\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\twithBottomSheet={ ! isCompatibleWithSettings }\n\t\t\t\thasPicker\n\t\t\t\tactions={ this.linkSettingsActions }\n\t\t\t\toptions={\n\t\t\t\t\tisCompatibleWithSettings\n\t\t\t\t\t\t? this.linkSettingsOptions\n\t\t\t\t\t\t: this.noFocusLinkSettingOptions\n\t\t\t\t}\n\t\t\t\tshowIcon={ ! isCompatibleWithSettings }\n\t\t\t/>\n\t\t);\n\t}\n\n\tsetRef( richText ) {\n\t\tthis.richTextRef = richText;\n\t}\n\n\t// Render `Text` with `placeholderText` styled as a placeholder\n\t// to calculate its width which then is set as a `minWidth`\n\tgetPlaceholderWidth( placeholderText ) {\n\t\treturn (\n\t\t\t<Text\n\t\t\t\tstyle={ styles.placeholder }\n\t\t\t\tonTextLayout={ this.onPlaceholderTextWidth }\n\t\t\t>\n\t\t\t\t{ placeholderText }\n\t\t\t</Text>\n\t\t);\n\t}\n\n\tonPlaceholderTextWidth( { nativeEvent } ) {\n\t\tconst { maxWidth, placeholderTextWidth } = this.state;\n\t\tconst textWidth =\n\t\t\tnativeEvent.lines[ 0 ] && nativeEvent.lines[ 0 ].width;\n\n\t\tif ( textWidth && textWidth !== placeholderTextWidth ) {\n\t\t\tthis.setState( {\n\t\t\t\tplaceholderTextWidth: Math.min( textWidth, maxWidth ),\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetBorderRadiusValue( borderRadius, defaultBorderRadius ) {\n\t\tconst valueAndUnit = getValueAndUnit( borderRadius );\n\t\tif ( Number.isInteger( parseInt( valueAndUnit?.valueToConvert ) ) ) {\n\t\t\treturn parseFloat( valueAndUnit.valueToConvert );\n\t\t}\n\t\treturn defaultBorderRadius;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tisSelected,\n\t\t\tclientId,\n\t\t\tonReplace,\n\t\t\tmergeBlocks,\n\t\t\tparentWidth,\n\t\t\tsetAttributes,\n\t\t\tstyle,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tplaceholder,\n\t\t\ttext,\n\t\t\tstyle: buttonStyle,\n\t\t\turl,\n\t\t\talign = 'center',\n\t\t\twidth,\n\t\t} = attributes;\n\t\tconst {\n\t\t\tmaxWidth,\n\t\t\tisButtonFocused,\n\t\t\tplaceholderTextWidth,\n\t\t\tborderRadiusUnit,\n\t\t} = this.state;\n\t\tconst { paddingTop: spacing, borderWidth } = styles.defaultButton;\n\n\t\tif ( parentWidth === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst borderRadius = buttonStyle?.border?.radius;\n\t\tconst borderRadiusValue = this.getBorderRadiusValue(\n\t\t\tborderRadius,\n\t\t\tstyles.defaultButton.borderRadius\n\t\t);\n\n\t\tconst buttonBorderRadiusValue =\n\t\t\tborderRadiusUnit === 'px' || borderRadiusUnit === '%'\n\t\t\t\t? borderRadiusValue\n\t\t\t\t: Math.floor( 14 * borderRadiusValue ); // lets assume that the font size is set to 14px; TO get a nicer preview.\n\t\tconst outlineBorderRadius =\n\t\t\tbuttonBorderRadiusValue > 0\n\t\t\t\t? buttonBorderRadiusValue + spacing + borderWidth\n\t\t\t\t: 0;\n\n\t\t// To achieve proper expanding and shrinking `RichText` on iOS, there is a need to set a `minWidth`\n\t\t// value at least on 1 when `RichText` is focused or when is not focused, but `RichText` value is\n\t\t// different than empty string.\n\t\tlet minWidth =\n\t\t\tisButtonFocused || ( ! isButtonFocused && text && text !== '' )\n\t\t\t\t? MIN_WIDTH\n\t\t\t\t: placeholderTextWidth;\n\t\tif ( width ) {\n\t\t\t// Set the width of the button.\n\t\t\tminWidth = Math.floor(\n\t\t\t\tmaxWidth * ( width / 100 ) - MIN_WIDTH_MARGINS[ width ]\n\t\t\t);\n\t\t}\n\t\t// To achieve proper expanding and shrinking `RichText` on Android, there is a need to set\n\t\t// a `placeholder` as an empty string when `RichText` is focused,\n\t\t// because `AztecView` is calculating a `minWidth` based on placeholder text.\n\t\tconst placeholderText =\n\t\t\tisButtonFocused || ( ! isButtonFocused && text && text !== '' )\n\t\t\t\t? ''\n\t\t\t\t: placeholder || __( 'Add textâ€¦' );\n\n\t\tconst backgroundColor = this.getBackgroundColor();\n\t\tconst textColor = this.getTextColor();\n\t\tconst isFixedWidth = !! width;\n\n\t\treturn (\n\t\t\t<View onLayout={ this.onLayout }>\n\t\t\t\t{ this.getPlaceholderWidth( placeholderText ) }\n\t\t\t\t<ColorBackground\n\t\t\t\t\tborderRadiusValue={ buttonBorderRadiusValue }\n\t\t\t\t\tbackgroundColor={ backgroundColor }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t>\n\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t<View\n\t\t\t\t\t\t\tpointerEvents=\"none\"\n\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\tstyles.outline,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tborderRadius: outlineBorderRadius,\n\t\t\t\t\t\t\t\t\tborderColor: backgroundColor,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tsetRef={ this.setRef }\n\t\t\t\t\t\tplaceholder={ placeholderText }\n\t\t\t\t\t\tvalue={ text }\n\t\t\t\t\t\tonChange={ this.onChangeText }\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t...richTextStyle.richText,\n\t\t\t\t\t\t\tpaddingLeft: isFixedWidth\n\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t: richTextStyle.richText.paddingLeft,\n\t\t\t\t\t\t\tpaddingRight: isFixedWidth\n\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t: richTextStyle.richText.paddingRight,\n\t\t\t\t\t\t\tcolor: textColor,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ttextAlign={ align }\n\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\tstyle?.color || styles.placeholderTextColor.color\n\t\t\t\t\t\t}\n\t\t\t\t\t\tidentifier=\"text\"\n\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\tminWidth={ minWidth } // The minimum Button size.\n\t\t\t\t\t\tmaxWidth={ isFixedWidth ? minWidth : maxWidth } // The width of the screen.\n\t\t\t\t\t\tid={ clientId }\n\t\t\t\t\t\tisSelected={ isButtonFocused }\n\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\tunstableOnFocus={ () =>\n\t\t\t\t\t\t\tthis.onToggleButtonFocus( true )\n\t\t\t\t\t\t}\n\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\tselectionColor={ textColor }\n\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\tthis.onSetMaxWidth();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonReplace={ onReplace }\n\t\t\t\t\t\tonRemove={ this.onRemove }\n\t\t\t\t\t\tonMerge={ mergeBlocks }\n\t\t\t\t\t/>\n\t\t\t\t</ColorBackground>\n\n\t\t\t\t{ isSelected && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\t\ttitle={ __( 'Edit link' ) }\n\t\t\t\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\t\t\t\tonClick={ this.onShowLinkSettings }\n\t\t\t\t\t\t\t\t\tisActive={ url }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t\t</BlockControls>\n\t\t\t\t\t\t{ this.getLinkSettings( false ) }\n\t\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t\t<PanelBody title={ __( 'Border Settings' ) }>\n\t\t\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Border Radius' ) }\n\t\t\t\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\t\t\tmax={ MAX_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\t\t\tvalue={ borderRadiusValue }\n\t\t\t\t\t\t\t\t\tonChange={ this.onChangeBorderRadius }\n\t\t\t\t\t\t\t\t\tonUnitChange={\n\t\t\t\t\t\t\t\t\t\tthis.onChangeBorderRadiusUnit\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tunit={ this.state.borderRadiusUnit }\n\t\t\t\t\t\t\t\t\tunits={ filterUnitsWithSettings(\n\t\t\t\t\t\t\t\t\t\t[ 'px', 'em', 'rem' ],\n\t\t\t\t\t\t\t\t\t\tCSS_UNITS\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t\t<WidthPanel\n\t\t\t\t\t\t\t\tselectedWidth={ width }\n\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<PanelBody title={ __( 'Link Settings' ) }>\n\t\t\t\t\t\t\t\t{ this.getLinkSettings( true ) }\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithInstanceId,\n\twithGradient,\n\twithSelect( ( select, { clientId, isSelected } ) => {\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\tconst { getBlockCount, getBlockRootClientId, getSettings } = select(\n\t\t\tblockEditorStore\n\t\t);\n\t\tconst parentId = getBlockRootClientId( clientId );\n\t\tconst numOfButtons = getBlockCount( parentId );\n\t\tconst settings = getSettings();\n\n\t\treturn {\n\t\t\tcolors: settings?.colors || [],\n\t\t\tgradients: settings?.gradients || [],\n\t\t\teditorSidebarOpened: isSelected && isEditorSidebarOpened(),\n\t\t\tnumOfButtons,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\treturn {\n\t\t\tcloseSettingsBottomSheet() {\n\t\t\t\tdispatch( 'core/edit-post' ).closeGeneralSidebar();\n\t\t\t},\n\t\t};\n\t} ),\n] )( ButtonEdit );\n"]}