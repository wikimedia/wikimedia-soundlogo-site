{"version":3,"sources":["@wordpress/block-library/src/navigation/placeholder.js"],"names":["NavigationPlaceholder","onCreate","ref","selectedMenu","setSelectedMenu","isCreatingFromMenu","setIsCreatingFromMenu","isResolvingPages","menus","isResolvingMenus","menuItems","hasResolvedMenuItems","hasPages","hasMenus","isLoading","createFromMenu","innerBlocks","blocks","selectNavigationBlock","menuItemsToBlocks","onCreateFromMenu","onCreateEmptyMenu","onCreateAllPages","block","toggleProps","variant","className","navigation","chevronDown","onClose","map","menu","id","name","undefined"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tPlaceholder,\n\tButton,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n\tSpinner,\n} from '@wordpress/components';\n\nimport {\n\tforwardRef,\n\tuseCallback,\n\tuseState,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { navigation, chevronDown, Icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useNavigationEntities from './use-navigation-entities';\nimport PlaceholderPreview from './placeholder-preview';\nimport menuItemsToBlocks from './menu-items-to-blocks';\n\nfunction NavigationPlaceholder( { onCreate }, ref ) {\n\tconst [ selectedMenu, setSelectedMenu ] = useState();\n\n\tconst [ isCreatingFromMenu, setIsCreatingFromMenu ] = useState( false );\n\n\tconst {\n\t\tisResolvingPages,\n\t\tmenus,\n\t\tisResolvingMenus,\n\t\tmenuItems,\n\t\thasResolvedMenuItems,\n\t\thasPages,\n\t\thasMenus,\n\t} = useNavigationEntities( selectedMenu );\n\n\tconst isLoading = isResolvingPages || isResolvingMenus;\n\n\tconst createFromMenu = useCallback( () => {\n\t\tconst { innerBlocks: blocks } = menuItemsToBlocks( menuItems );\n\t\tconst selectNavigationBlock = true;\n\t\tonCreate( blocks, selectNavigationBlock );\n\t}, [ menuItems, menuItemsToBlocks, onCreate ] );\n\n\tconst onCreateFromMenu = () => {\n\t\t// If we have menu items, create the block right away.\n\t\tif ( hasResolvedMenuItems ) {\n\t\t\tcreateFromMenu();\n\t\t\treturn;\n\t\t}\n\n\t\t// Otherwise, create the block when resolution finishes.\n\t\tsetIsCreatingFromMenu( true );\n\t};\n\n\tconst onCreateEmptyMenu = () => {\n\t\tonCreate( [] );\n\t};\n\n\tconst onCreateAllPages = () => {\n\t\tconst block = [ createBlock( 'core/page-list' ) ];\n\t\tconst selectNavigationBlock = true;\n\t\tonCreate( block, selectNavigationBlock );\n\t};\n\n\tuseEffect( () => {\n\t\t// If the user selected a menu but we had to wait for menu items to\n\t\t// finish resolving, then create the block once resolution finishes.\n\t\tif ( isCreatingFromMenu && hasResolvedMenuItems ) {\n\t\t\tcreateFromMenu();\n\t\t\tsetIsCreatingFromMenu( false );\n\t\t}\n\t}, [ isCreatingFromMenu, hasResolvedMenuItems ] );\n\n\tconst toggleProps = {\n\t\tvariant: 'primary',\n\t\tclassName: 'wp-block-navigation-placeholder__actions__dropdown',\n\t};\n\treturn (\n\t\t<Placeholder className=\"wp-block-navigation-placeholder\">\n\t\t\t<PlaceholderPreview />\n\n\t\t\t<div className=\"wp-block-navigation-placeholder__controls\">\n\t\t\t\t{ isLoading && (\n\t\t\t\t\t<div ref={ ref }>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ ! isLoading && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__actions\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"wp-block-navigation-placeholder__actions__indicator\">\n\t\t\t\t\t\t\t<Icon icon={ navigation } /> { __( 'Navigation' ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ hasMenus ? (\n\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\ttext={ __( 'Add existing menu' ) }\n\t\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\t\ttoggleProps={ toggleProps }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t{ menus.map( ( menu ) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedMenu(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmenu.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCreateFromMenu();\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={ menu.id }\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ menu.name }\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t) : undefined }\n\t\t\t\t\t\t{ hasPages ? (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={ hasMenus ? 'tertiary' : 'primary' }\n\t\t\t\t\t\t\t\tonClick={ onCreateAllPages }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Add all pages' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) : undefined }\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ onCreateEmptyMenu }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Start empty' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</Placeholder>\n\t);\n}\n\nexport default forwardRef( NavigationPlaceholder );\n"]}