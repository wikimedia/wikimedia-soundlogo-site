{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["ALLOWED_BLOCKS","DEFAULT_BLOCK","DIRECT_INSERT","block","innerBlocks","every","name","LAYOUT","type","alignments","getComputedStyle","node","ownerDocument","defaultView","detectColors","colorsDetectionElement","setColor","setBackground","color","backgroundColorNode","backgroundColor","parentNode","nodeType","ELEMENT_NODE","Navigation","selectedBlockHasDescendants","attributes","setAttributes","clientId","hasExistingNavItems","isImmediateParentOfSelectedBlock","isSelected","updateInnerBlocks","className","setBackgroundColor","textColor","setTextColor","overlayBackgroundColor","setOverlayBackgroundColor","overlayTextColor","setOverlayTextColor","hasSubmenuIndicatorSetting","hasItemJustificationControls","hasColorSettings","customPlaceholder","CustomPlaceholder","customAppender","CustomAppender","isPlaceholderShown","setIsPlaceholderShown","isResponsiveMenuOpen","setResponsiveMenuVisibility","selectBlock","blockEditorStore","navRef","blockProps","ref","itemsJustification","orientation","isResponsive","class","slug","style","navigatorToolbarButton","navigatorModal","placeholder","appender","undefined","innerBlocksProps","allowedBlocks","__experimentalDefaultBlock","__experimentalDirectInsert","renderAppender","__experimentalCaptureToolbars","templateLock","__experimentalLayout","enableContrastChecking","Platform","OS","detectedBackgroundColor","setDetectedBackgroundColor","detectedColor","setDetectedColor","detectedOverlayBackgroundColor","setDetectedOverlayBackgroundColor","detectedOverlayColor","setDetectedOverlayColor","current","subMenuElement","querySelector","PlaceholderComponent","NavigationPlaceholder","blocks","selectNavigationBlock","justifyAllowedControls","value","position","isAlternate","openSubmenusOnClick","showSubmenuIcon","onChange","label","select","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","length","dispatch","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tPlatform,\n} from '@wordpress/element';\nimport {\n\t__experimentalUseInnerBlocksProps as useInnerBlocksProps,\n\tInspectorControls,\n\tJustifyToolbar,\n\tBlockControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n\twithColors,\n\tPanelColorSettings,\n\tContrastChecker,\n\tgetColorClassName,\n} from '@wordpress/block-editor';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport { PanelBody, ToggleControl, ToolbarGroup } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport NavigationPlaceholder from './placeholder';\nimport PlaceholderPreview from './placeholder-preview';\nimport ResponsiveWrapper from './responsive-wrapper';\n\nconst ALLOWED_BLOCKS = [\n\t'core/navigation-link',\n\t'core/search',\n\t'core/social-links',\n\t'core/page-list',\n\t'core/spacer',\n\t'core/home-link',\n\t'core/site-title',\n\t'core/site-logo',\n\t'core/navigation-submenu',\n];\n\nconst DEFAULT_BLOCK = [ 'core/navigation-link' ];\n\nconst DIRECT_INSERT = ( block ) => {\n\treturn block.innerBlocks.every(\n\t\t( { name } ) =>\n\t\t\tname === 'core/navigation-link' ||\n\t\t\tname === 'core/navigation-submenu'\n\t);\n};\n\nconst LAYOUT = {\n\ttype: 'default',\n\talignments: [],\n};\n\nfunction getComputedStyle( node ) {\n\treturn node.ownerDocument.defaultView.getComputedStyle( node );\n}\n\nfunction detectColors( colorsDetectionElement, setColor, setBackground ) {\n\tif ( ! colorsDetectionElement ) {\n\t\treturn;\n\t}\n\tsetColor( getComputedStyle( colorsDetectionElement ).color );\n\n\tlet backgroundColorNode = colorsDetectionElement;\n\tlet backgroundColor = getComputedStyle( backgroundColorNode )\n\t\t.backgroundColor;\n\twhile (\n\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\n\t\tbackgroundColorNode.parentNode &&\n\t\tbackgroundColorNode.parentNode.nodeType ===\n\t\t\tbackgroundColorNode.parentNode.ELEMENT_NODE\n\t) {\n\t\tbackgroundColorNode = backgroundColorNode.parentNode;\n\t\tbackgroundColor = getComputedStyle( backgroundColorNode )\n\t\t\t.backgroundColor;\n\t}\n\n\tsetBackground( backgroundColor );\n}\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tsetAttributes,\n\tclientId,\n\thasExistingNavItems,\n\tisImmediateParentOfSelectedBlock,\n\tisSelected,\n\tupdateInnerBlocks,\n\tclassName,\n\tbackgroundColor,\n\tsetBackgroundColor,\n\ttextColor,\n\tsetTextColor,\n\toverlayBackgroundColor,\n\tsetOverlayBackgroundColor,\n\toverlayTextColor,\n\tsetOverlayTextColor,\n\n\t// These props are used by the navigation editor to override specific\n\t// navigation block settings.\n\thasSubmenuIndicatorSetting = true,\n\thasItemJustificationControls = true,\n\thasColorSettings = true,\n\tcustomPlaceholder: CustomPlaceholder = null,\n\tcustomAppender: CustomAppender = null,\n} ) {\n\tconst [ isPlaceholderShown, setIsPlaceholderShown ] = useState(\n\t\t! hasExistingNavItems\n\t);\n\tconst [ isResponsiveMenuOpen, setResponsiveMenuVisibility ] = useState(\n\t\tfalse\n\t);\n\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\tconst navRef = useRef();\n\n\tconst blockProps = useBlockProps( {\n\t\tref: navRef,\n\t\tclassName: classnames( className, {\n\t\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t\t'is-vertical': attributes.orientation === 'vertical',\n\t\t\t'is-responsive': attributes.isResponsive,\n\t\t\t'has-text-color': !! textColor.color || !! textColor?.class,\n\t\t\t[ getColorClassName(\n\t\t\t\t'color',\n\t\t\t\ttextColor?.slug\n\t\t\t) ]: !! textColor?.slug,\n\t\t\t'has-background': !! backgroundColor.color || backgroundColor.class,\n\t\t\t[ getColorClassName(\n\t\t\t\t'background-color',\n\t\t\t\tbackgroundColor?.slug\n\t\t\t) ]: !! backgroundColor?.slug,\n\t\t} ),\n\t\tstyle: {\n\t\t\tcolor: ! textColor?.slug && textColor?.color,\n\t\t\tbackgroundColor: ! backgroundColor?.slug && backgroundColor?.color,\n\t\t},\n\t} );\n\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\tconst placeholder = useMemo( () => <PlaceholderPreview />, [] );\n\n\t// When the block is selected itself or has a top level item selected that\n\t// doesn't itself have children, show the standard appender. Else show no\n\t// appender.\n\tconst appender =\n\t\tisSelected ||\n\t\t( isImmediateParentOfSelectedBlock && ! selectedBlockHasDescendants )\n\t\t\t? undefined\n\t\t\t: false;\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: 'wp-block-navigation__container',\n\t\t},\n\t\t{\n\t\t\tallowedBlocks: ALLOWED_BLOCKS,\n\t\t\t__experimentalDefaultBlock: DEFAULT_BLOCK,\n\t\t\t__experimentalDirectInsert: DIRECT_INSERT,\n\t\t\torientation: attributes.orientation,\n\t\t\trenderAppender: CustomAppender || appender,\n\n\t\t\t// Ensure block toolbar is not too far removed from item\n\t\t\t// being edited when in vertical mode.\n\t\t\t// see: https://github.com/WordPress/gutenberg/pull/34615.\n\t\t\t__experimentalCaptureToolbars:\n\t\t\t\tattributes.orientation !== 'vertical',\n\t\t\t// Template lock set to false here so that the Nav\n\t\t\t// Block on the experimental menus screen does not\n\t\t\t// inherit templateLock={ 'all' }.\n\t\t\ttemplateLock: false,\n\t\t\t__experimentalLayout: LAYOUT,\n\t\t\tplaceholder: ! CustomPlaceholder ? placeholder : undefined,\n\t\t}\n\t);\n\n\t// Turn on contrast checker for web only since it's not supported on mobile yet.\n\tconst enableContrastChecking = Platform.OS === 'web';\n\n\tconst [ detectedBackgroundColor, setDetectedBackgroundColor ] = useState();\n\tconst [ detectedColor, setDetectedColor ] = useState();\n\tconst [\n\t\tdetectedOverlayBackgroundColor,\n\t\tsetDetectedOverlayBackgroundColor,\n\t] = useState();\n\tconst [ detectedOverlayColor, setDetectedOverlayColor ] = useState();\n\n\tuseEffect( () => {\n\t\tif ( ! enableContrastChecking ) {\n\t\t\treturn;\n\t\t}\n\t\tdetectColors(\n\t\t\tnavRef.current,\n\t\t\tsetDetectedColor,\n\t\t\tsetDetectedBackgroundColor\n\t\t);\n\t\tconst subMenuElement = navRef.current.querySelector(\n\t\t\t'[data-type=\"core/navigation-link\"] [data-type=\"core/navigation-link\"]'\n\t\t);\n\t\tif ( subMenuElement ) {\n\t\t\tdetectColors(\n\t\t\t\tsubMenuElement,\n\t\t\t\tsetDetectedOverlayColor,\n\t\t\t\tsetDetectedOverlayBackgroundColor\n\t\t\t);\n\t\t}\n\t} );\n\n\tif ( isPlaceholderShown ) {\n\t\tconst PlaceholderComponent = CustomPlaceholder\n\t\t\t? CustomPlaceholder\n\t\t\t: NavigationPlaceholder;\n\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<PlaceholderComponent\n\t\t\t\t\tonCreate={ ( blocks, selectNavigationBlock ) => {\n\t\t\t\t\t\tsetIsPlaceholderShown( false );\n\t\t\t\t\t\tupdateInnerBlocks( blocks );\n\t\t\t\t\t\tif ( selectNavigationBlock ) {\n\t\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst justifyAllowedControls =\n\t\tattributes.orientation === 'vertical'\n\t\t\t? [ 'left', 'center', 'right' ]\n\t\t\t: [ 'left', 'center', 'right', 'space-between' ];\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t{ hasItemJustificationControls && (\n\t\t\t\t\t<JustifyToolbar\n\t\t\t\t\t\tvalue={ attributes.itemsJustification }\n\t\t\t\t\t\tallowedControls={ justifyAllowedControls }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { itemsJustification: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\tposition: 'bottom right',\n\t\t\t\t\t\t\tisAlternate: true,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t{ hasSubmenuIndicatorSetting && (\n\t\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.isResponsive }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tisResponsive: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Enable responsive menu' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.openSubmenusOnClick }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\topenSubmenusOnClick: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Open submenus on click' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ! attributes.openSubmenusOnClick && (\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tshowSubmenuIcon: value,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</PanelBody>\n\t\t\t\t) }\n\t\t\t\t{ hasColorSettings && (\n\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\ttitle={ __( 'Color' ) }\n\t\t\t\t\t\tinitialOpen={ false }\n\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\tonChange: setTextColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: backgroundColor.color,\n\t\t\t\t\t\t\t\tonChange: setBackgroundColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Background' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: overlayTextColor.color,\n\t\t\t\t\t\t\t\tonChange: setOverlayTextColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Overlay text' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: overlayBackgroundColor.color,\n\t\t\t\t\t\t\t\tonChange: setOverlayBackgroundColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Overlay background' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ enableContrastChecking && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t\tbackgroundColor={ detectedBackgroundColor }\n\t\t\t\t\t\t\t\t\ttextColor={ detectedColor }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t\tbackgroundColor={\n\t\t\t\t\t\t\t\t\t\tdetectedOverlayBackgroundColor\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttextColor={ detectedOverlayColor }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t) }\n\t\t\t</InspectorControls>\n\t\t\t<nav { ...blockProps }>\n\t\t\t\t<ResponsiveWrapper\n\t\t\t\t\tid={ clientId }\n\t\t\t\t\tonToggle={ setResponsiveMenuVisibility }\n\t\t\t\t\tisOpen={ isResponsiveMenuOpen }\n\t\t\t\t\tisResponsive={ attributes.isResponsive }\n\t\t\t\t>\n\t\t\t\t\t<div { ...innerBlocksProps }></div>\n\t\t\t\t</ResponsiveWrapper>\n\t\t\t</nav>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( blockEditorStore ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( blockEditorStore );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\n\t\t\t// This prop is already available but computing it here ensures it's\n\t\t\t// fresh compared to isImmediateParentOfSelectedBlock\n\t\t\tisSelected: selectedBlockId === clientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateInnerBlocks( blocks ) {\n\t\t\t\tif ( blocks?.length === 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdispatch( blockEditorStore ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n\twithColors(\n\t\t{ textColor: 'color' },\n\t\t{ backgroundColor: 'color' },\n\t\t{ overlayBackgroundColor: 'color' },\n\t\t{ overlayTextColor: 'color' }\n\t),\n] )( Navigation );\n"]}