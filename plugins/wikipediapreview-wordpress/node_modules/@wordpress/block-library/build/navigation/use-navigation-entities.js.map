{"version":3,"sources":["@wordpress/block-library/src/navigation/use-navigation-entities.js"],"names":["useNavigationEntities","menuId","usePageEntities","useMenuEntities","useMenuItemEntities","menus","isResolvingMenus","hasResolvedMenus","select","getMenus","isResolving","hasFinishedResolution","coreStore","menusParameters","per_page","hasMenus","length","menuItems","hasResolvedMenuItems","getMenuItems","hasSelectedMenu","undefined","menuItemsParameters","pages","isResolvingPages","hasResolvedPages","getEntityRecords","pagesParameters","parent","order","orderby","hasPages"],"mappings":";;;;;;;AAGA;;AACA;;AAJA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,qBAAT,CAAgCC,MAAhC,EAAyC;AACvD,SAAO,EACN,GAAGC,eAAe,EADZ;AAEN,OAAGC,eAAe,EAFZ;AAGN,OAAGC,mBAAmB,CAAEH,MAAF;AAHhB,GAAP;AAKA;;AAED,SAASE,eAAT,GAA2B;AAC1B,QAAM;AAAEE,IAAAA,KAAF;AAASC,IAAAA,gBAAT;AAA2BC,IAAAA;AAA3B,MAAgD,qBACnDC,MAAF,IAAc;AACb,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,WAAZ;AAAyBC,MAAAA;AAAzB,QAAmDH,MAAM,CAC9DI,eAD8D,CAA/D;AAIA,UAAMC,eAAe,GAAG,CAAE;AAAEC,MAAAA,QAAQ,EAAE,CAAC;AAAb,KAAF,CAAxB;AAEA,WAAO;AACNT,MAAAA,KAAK,EAAEI,QAAQ,CAAE,GAAGI,eAAL,CADT;AAENP,MAAAA,gBAAgB,EAAEI,WAAW,CAAE,UAAF,EAAcG,eAAd,CAFvB;AAGNN,MAAAA,gBAAgB,EAAEI,qBAAqB,CACtC,UADsC,EAEtCE,eAFsC;AAHjC,KAAP;AAQA,GAhBoD,EAiBrD,EAjBqD,CAAtD;AAoBA,SAAO;AACNR,IAAAA,KADM;AAENC,IAAAA,gBAFM;AAGNC,IAAAA,gBAHM;AAINQ,IAAAA,QAAQ,EAAE,CAAC,EAAIR,gBAAgB,IAAIF,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEW,MAA/B;AAJL,GAAP;AAMA;;AAED,SAASZ,mBAAT,CAA8BH,MAA9B,EAAuC;AACtC,QAAM;AAAEgB,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAAsC,qBACzCV,MAAF,IAAc;AACb,UAAM;AAAEW,MAAAA,YAAF;AAAgBR,MAAAA;AAAhB,QAA0CH,MAAM,CAAEI,eAAF,CAAtD;AAEA,UAAMQ,eAAe,GAAGnB,MAAM,KAAKoB,SAAnC;AACA,UAAMC,mBAAmB,GAAGF,eAAe,GACxC,CACA;AACCf,MAAAA,KAAK,EAAEJ,MADR;AAECa,MAAAA,QAAQ,EAAE,CAAC;AAFZ,KADA,CADwC,GAOxCO,SAPH;AASA,WAAO;AACNJ,MAAAA,SAAS,EAAEG,eAAe,GACvBD,YAAY,CAAE,GAAGG,mBAAL,CADW,GAEvBD,SAHG;AAINH,MAAAA,oBAAoB,EAAEE,eAAe,GAClCT,qBAAqB,CACrB,cADqB,EAErBW,mBAFqB,CADa,GAKlC;AATG,KAAP;AAWA,GAzB0C,EA0B3C,CAAErB,MAAF,CA1B2C,CAA5C;AA6BA,SAAO;AACNgB,IAAAA,SADM;AAENC,IAAAA;AAFM,GAAP;AAIA;;AAED,SAAShB,eAAT,GAA2B;AAC1B,QAAM;AAAEqB,IAAAA,KAAF;AAASC,IAAAA,gBAAT;AAA2BC,IAAAA;AAA3B,MAAgD,qBACnDjB,MAAF,IAAc;AACb,UAAM;AACLkB,MAAAA,gBADK;AAELhB,MAAAA,WAFK;AAGLC,MAAAA;AAHK,QAIFH,MAAM,CAAEI,eAAF,CAJV;AAMA,UAAMe,eAAe,GAAG,CACvB,UADuB,EAEvB,MAFuB,EAGvB;AACCC,MAAAA,MAAM,EAAE,CADT;AAECC,MAAAA,KAAK,EAAE,KAFR;AAGCC,MAAAA,OAAO,EAAE,IAHV;AAIChB,MAAAA,QAAQ,EAAE,CAAC;AAJZ,KAHuB,CAAxB;AAWA,WAAO;AACNS,MAAAA,KAAK,EAAEG,gBAAgB,CAAE,GAAGC,eAAL,CAAhB,IAA0C,IAD3C;AAENH,MAAAA,gBAAgB,EAAEd,WAAW,CAC5B,kBAD4B,EAE5BiB,eAF4B,CAFvB;AAMNF,MAAAA,gBAAgB,EAAEd,qBAAqB,CACtC,kBADsC,EAEtCgB,eAFsC;AANjC,KAAP;AAWA,GA9BoD,EA+BrD,EA/BqD,CAAtD;AAkCA,SAAO;AACNJ,IAAAA,KADM;AAENC,IAAAA,gBAFM;AAGNC,IAAAA,gBAHM;AAINM,IAAAA,QAAQ,EAAE,CAAC,EAAIN,gBAAgB,IAAIF,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEP,MAA/B;AAJL,GAAP;AAMA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * @typedef {Object} NavigationEntitiesData\n * @property {Array|undefined} pages                - a collection of WP Post entity objects of post type \"Page\".\n * @property {boolean}         isResolvingPages     - indicates whether the request to fetch pages is currently resolving.\n * @property {boolean}         hasResolvedPages     - indicates whether the request to fetch pages has finished resolving.\n * @property {Array|undefined} menus                - a collection of Menu entity objects.\n * @property {boolean}         isResolvingMenus     - indicates whether the request to fetch menus is currently resolving.\n * @property {boolean}         hasResolvedMenus     - indicates whether the request to fetch menus has finished resolving.\n * @property {Array|undefined} menusItems           - a collection of Menu Item entity objects for the current menuId.\n * @property {boolean}         hasResolvedMenuItems - indicates whether the request to fetch menuItems has finished resolving.\n * @property {boolean}         hasPages             - indicates whether there is currently any data for pages.\n * @property {boolean}         hasMenus             - indicates whether there is currently any data for menus.\n */\n\n/**\n * Manages fetching and resolution state for all entities required\n * for the Navigation block.\n *\n * @param {number} menuId the menu for which to retrieve menuItem data.\n * @return { NavigationEntitiesData } the entity data.\n */\nexport default function useNavigationEntities( menuId ) {\n\treturn {\n\t\t...usePageEntities(),\n\t\t...useMenuEntities(),\n\t\t...useMenuItemEntities( menuId ),\n\t};\n}\n\nfunction useMenuEntities() {\n\tconst { menus, isResolvingMenus, hasResolvedMenus } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getMenus, isResolving, hasFinishedResolution } = select(\n\t\t\t\tcoreStore\n\t\t\t);\n\n\t\t\tconst menusParameters = [ { per_page: -1 } ];\n\n\t\t\treturn {\n\t\t\t\tmenus: getMenus( ...menusParameters ),\n\t\t\t\tisResolvingMenus: isResolving( 'getMenus', menusParameters ),\n\t\t\t\thasResolvedMenus: hasFinishedResolution(\n\t\t\t\t\t'getMenus',\n\t\t\t\t\tmenusParameters\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tmenus,\n\t\tisResolvingMenus,\n\t\thasResolvedMenus,\n\t\thasMenus: !! ( hasResolvedMenus && menus?.length ),\n\t};\n}\n\nfunction useMenuItemEntities( menuId ) {\n\tconst { menuItems, hasResolvedMenuItems } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getMenuItems, hasFinishedResolution } = select( coreStore );\n\n\t\t\tconst hasSelectedMenu = menuId !== undefined;\n\t\t\tconst menuItemsParameters = hasSelectedMenu\n\t\t\t\t? [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenus: menuId,\n\t\t\t\t\t\t\tper_page: -1,\n\t\t\t\t\t\t},\n\t\t\t\t  ]\n\t\t\t\t: undefined;\n\n\t\t\treturn {\n\t\t\t\tmenuItems: hasSelectedMenu\n\t\t\t\t\t? getMenuItems( ...menuItemsParameters )\n\t\t\t\t\t: undefined,\n\t\t\t\thasResolvedMenuItems: hasSelectedMenu\n\t\t\t\t\t? hasFinishedResolution(\n\t\t\t\t\t\t\t'getMenuItems',\n\t\t\t\t\t\t\tmenuItemsParameters\n\t\t\t\t\t  )\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t},\n\t\t[ menuId ]\n\t);\n\n\treturn {\n\t\tmenuItems,\n\t\thasResolvedMenuItems,\n\t};\n}\n\nfunction usePageEntities() {\n\tconst { pages, isResolvingPages, hasResolvedPages } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetEntityRecords,\n\t\t\t\tisResolving,\n\t\t\t\thasFinishedResolution,\n\t\t\t} = select( coreStore );\n\n\t\t\tconst pagesParameters = [\n\t\t\t\t'postType',\n\t\t\t\t'page',\n\t\t\t\t{\n\t\t\t\t\tparent: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\torderby: 'id',\n\t\t\t\t\tper_page: -1,\n\t\t\t\t},\n\t\t\t];\n\n\t\t\treturn {\n\t\t\t\tpages: getEntityRecords( ...pagesParameters ) || null,\n\t\t\t\tisResolvingPages: isResolving(\n\t\t\t\t\t'getEntityRecords',\n\t\t\t\t\tpagesParameters\n\t\t\t\t),\n\t\t\t\thasResolvedPages: hasFinishedResolution(\n\t\t\t\t\t'getEntityRecords',\n\t\t\t\t\tpagesParameters\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tpages,\n\t\tisResolvingPages,\n\t\thasResolvedPages,\n\t\thasPages: !! ( hasResolvedPages && pages?.length ),\n\t};\n}\n"]}