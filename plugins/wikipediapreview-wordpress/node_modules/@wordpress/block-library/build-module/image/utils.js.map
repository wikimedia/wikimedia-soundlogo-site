{"version":3,"sources":["@wordpress/block-library/src/image/utils.js"],"names":["isEmpty","each","get","NEW_TAB_REL","removeNewTabRel","currentRel","newRel","undefined","relVal","regExp","RegExp","replace","trim","getUpdatedLinkTargetSettings","value","rel","linkTarget","updatedRel","getImageSizeAttributes","image","size","url","width","height","sizeSlug"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAT,EAAkBC,IAAlB,EAAwBC,GAAxB,QAAmC,QAAnC;AAEA;AACA;AACA;;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAO,SAASC,eAAT,CAA0BC,UAA1B,EAAuC;AAC7C,MAAIC,MAAM,GAAGD,UAAb;;AAEA,MAAKA,UAAU,KAAKE,SAAf,IAA4B,CAAEP,OAAO,CAAEM,MAAF,CAA1C,EAAuD;AACtD,QAAK,CAAEN,OAAO,CAAEM,MAAF,CAAd,EAA2B;AAC1BL,MAAAA,IAAI,CAAEE,WAAF,EAAiBK,MAAF,IAAc;AAChC,cAAMC,MAAM,GAAG,IAAIC,MAAJ,CAAY,QAAQF,MAAR,GAAiB,KAA7B,EAAoC,IAApC,CAAf;AACAF,QAAAA,MAAM,GAAGA,MAAM,CAACK,OAAP,CAAgBF,MAAhB,EAAwB,EAAxB,CAAT;AACA,OAHG,CAAJ,CAD0B,CAM1B;;AACA,UAAKH,MAAM,KAAKD,UAAhB,EAA6B;AAC5BC,QAAAA,MAAM,GAAGA,MAAM,CAACM,IAAP,EAAT;AACA;;AAED,UAAKZ,OAAO,CAAEM,MAAF,CAAZ,EAAyB;AACxBA,QAAAA,MAAM,GAAGC,SAAT;AACA;AACD;AACD;;AAED,SAAOD,MAAP;AACA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASO,4BAAT,CAAuCC,KAAvC,EAA8C;AAAEC,EAAAA;AAAF,CAA9C,EAAwD;AAC9D,QAAMC,UAAU,GAAGF,KAAK,GAAG,QAAH,GAAcP,SAAtC;AAEA,MAAIU,UAAJ;;AACA,MAAK,CAAED,UAAF,IAAgB,CAAED,GAAvB,EAA6B;AAC5BE,IAAAA,UAAU,GAAGV,SAAb;AACA,GAFD,MAEO;AACNU,IAAAA,UAAU,GAAGb,eAAe,CAAEW,GAAF,CAA5B;AACA;;AAED,SAAO;AACNC,IAAAA,UADM;AAEND,IAAAA,GAAG,EAAEE;AAFC,GAAP;AAIA;AAED;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,sBAAT,CAAiCC,KAAjC,EAAwCC,IAAxC,EAA+C;AACrD,QAAMC,GAAG,GAAGnB,GAAG,CAAEiB,KAAF,EAAS,CAAE,eAAF,EAAmB,OAAnB,EAA4BC,IAA5B,EAAkC,YAAlC,CAAT,CAAf;;AAEA,MAAKC,GAAL,EAAW;AACV,WAAO;AAAEA,MAAAA,GAAF;AAAOC,MAAAA,KAAK,EAAEf,SAAd;AAAyBgB,MAAAA,MAAM,EAAEhB,SAAjC;AAA4CiB,MAAAA,QAAQ,EAAEJ;AAAtD,KAAP;AACA;;AAED,SAAO,EAAP;AACA","sourcesContent":["/**\n * External dependencies\n */\nimport { isEmpty, each, get } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { NEW_TAB_REL } from './constants';\n\nexport function removeNewTabRel( currentRel ) {\n\tlet newRel = currentRel;\n\n\tif ( currentRel !== undefined && ! isEmpty( newRel ) ) {\n\t\tif ( ! isEmpty( newRel ) ) {\n\t\t\teach( NEW_TAB_REL, ( relVal ) => {\n\t\t\t\tconst regExp = new RegExp( '\\\\b' + relVal + '\\\\b', 'gi' );\n\t\t\t\tnewRel = newRel.replace( regExp, '' );\n\t\t\t} );\n\n\t\t\t// Only trim if NEW_TAB_REL values was replaced.\n\t\t\tif ( newRel !== currentRel ) {\n\t\t\t\tnewRel = newRel.trim();\n\t\t\t}\n\n\t\t\tif ( isEmpty( newRel ) ) {\n\t\t\t\tnewRel = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newRel;\n}\n\n/**\n * Helper to get the link target settings to be stored.\n *\n * @param {boolean} value          The new link target value.\n * @param {Object}  attributes     Block attributes.\n * @param {Object}  attributes.rel Image block's rel attribute.\n *\n * @return {Object} Updated link target settings.\n */\nexport function getUpdatedLinkTargetSettings( value, { rel } ) {\n\tconst linkTarget = value ? '_blank' : undefined;\n\n\tlet updatedRel;\n\tif ( ! linkTarget && ! rel ) {\n\t\tupdatedRel = undefined;\n\t} else {\n\t\tupdatedRel = removeNewTabRel( rel );\n\t}\n\n\treturn {\n\t\tlinkTarget,\n\t\trel: updatedRel,\n\t};\n}\n\n/**\n * Determines new Image block attributes size selection.\n *\n * @param {Object} image Media file object for gallery image.\n * @param {string} size  Selected size slug to apply.\n */\nexport function getImageSizeAttributes( image, size ) {\n\tconst url = get( image, [ 'media_details', 'sizes', size, 'source_url' ] );\n\n\tif ( url ) {\n\t\treturn { url, width: undefined, height: undefined, sizeSlug: size };\n\t}\n\n\treturn {};\n}\n"]}