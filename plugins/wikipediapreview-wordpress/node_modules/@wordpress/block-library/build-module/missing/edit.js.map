{"version":3,"sources":["@wordpress/block-library/src/missing/edit.js"],"names":["__","sprintf","RawHTML","Button","getBlockType","createBlock","withDispatch","Warning","useBlockProps","store","blockEditorStore","safeHTML","MissingBlockWarning","attributes","convertToHTML","originalName","originalUndelimitedContent","hasContent","hasHTMLBlock","actions","messageHTML","push","className","MissingEdit","dispatch","clientId","replaceBlock","content"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,EAAT,EAAaC,OAAb,QAA4B,iBAA5B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,mBAA1C;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SACCC,OADD,EAECC,aAFD,EAGCC,KAAK,IAAIC,gBAHV,QAIO,yBAJP;AAKA,SAASC,QAAT,QAAyB,gBAAzB;;AAEA,SAASC,mBAAT,CAA8B;AAAEC,EAAAA,UAAF;AAAcC,EAAAA;AAAd,CAA9B,EAA8D;AAC7D,QAAM;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAA+CH,UAArD;AACA,QAAMI,UAAU,GAAG,CAAC,CAAED,0BAAtB;AACA,QAAME,YAAY,GAAGd,YAAY,CAAE,WAAF,CAAjC;AAEA,QAAMe,OAAO,GAAG,EAAhB;AACA,MAAIC,WAAJ;;AACA,MAAKH,UAAU,IAAIC,YAAnB,EAAkC;AACjCE,IAAAA,WAAW,GAAGnB,OAAO;AACpB;AACAD,IAAAA,EAAE,CACD,2JADC,CAFkB,EAKpBe,YALoB,CAArB;AAOAI,IAAAA,OAAO,CAACE,IAAR,CACC,cAAC,MAAD;AAAQ,MAAA,GAAG,EAAC,SAAZ;AAAsB,MAAA,OAAO,EAAGP,aAAhC;AAAgD,MAAA,OAAO,EAAC;AAAxD,OACGd,EAAE,CAAE,cAAF,CADL,CADD;AAKA,GAbD,MAaO;AACNoB,IAAAA,WAAW,GAAGnB,OAAO;AACpB;AACAD,IAAAA,EAAE,CACD,8GADC,CAFkB,EAKpBe,YALoB,CAArB;AAOA;;AAED,SACC,qBAAUP,aAAa,CAAE;AAAEc,IAAAA,SAAS,EAAE;AAAb,GAAF,CAAvB,EACC,cAAC,OAAD;AAAS,IAAA,OAAO,EAAGH;AAAnB,KAA+BC,WAA/B,CADD,EAEC,cAAC,OAAD,QAAWT,QAAQ,CAAEK,0BAAF,CAAnB,CAFD,CADD;AAMA;;AAED,MAAMO,WAAW,GAAGjB,YAAY,CAAE,CAAEkB,QAAF,EAAY;AAAEC,EAAAA,QAAF;AAAYZ,EAAAA;AAAZ,CAAZ,KAA0C;AAC3E,QAAM;AAAEa,IAAAA;AAAF,MAAmBF,QAAQ,CAAEd,gBAAF,CAAjC;AACA,SAAO;AACNI,IAAAA,aAAa,GAAG;AACfY,MAAAA,YAAY,CACXD,QADW,EAEXpB,WAAW,CAAE,WAAF,EAAe;AACzBsB,QAAAA,OAAO,EAAEd,UAAU,CAACG;AADK,OAAf,CAFA,CAAZ;AAMA;;AARK,GAAP;AAUA,CAZ+B,CAAZ,CAYfJ,mBAZe,CAApB;AAcA,eAAeW,WAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { RawHTML } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { getBlockType, createBlock } from '@wordpress/blocks';\nimport { withDispatch } from '@wordpress/data';\nimport {\n\tWarning,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { safeHTML } from '@wordpress/dom';\n\nfunction MissingBlockWarning( { attributes, convertToHTML } ) {\n\tconst { originalName, originalUndelimitedContent } = attributes;\n\tconst hasContent = !! originalUndelimitedContent;\n\tconst hasHTMLBlock = getBlockType( 'core/html' );\n\n\tconst actions = [];\n\tlet messageHTML;\n\tif ( hasContent && hasHTMLBlock ) {\n\t\tmessageHTML = sprintf(\n\t\t\t/* translators: %s: block name */\n\t\t\t__(\n\t\t\t\t'Your site doesn’t include support for the \"%s\" block. You can leave this block intact, convert its content to a Custom HTML block, or remove it entirely.'\n\t\t\t),\n\t\t\toriginalName\n\t\t);\n\t\tactions.push(\n\t\t\t<Button key=\"convert\" onClick={ convertToHTML } variant=\"primary\">\n\t\t\t\t{ __( 'Keep as HTML' ) }\n\t\t\t</Button>\n\t\t);\n\t} else {\n\t\tmessageHTML = sprintf(\n\t\t\t/* translators: %s: block name */\n\t\t\t__(\n\t\t\t\t'Your site doesn’t include support for the \"%s\" block. You can leave this block intact or remove it entirely.'\n\t\t\t),\n\t\t\toriginalName\n\t\t);\n\t}\n\n\treturn (\n\t\t<div { ...useBlockProps( { className: 'has-warning' } ) }>\n\t\t\t<Warning actions={ actions }>{ messageHTML }</Warning>\n\t\t\t<RawHTML>{ safeHTML( originalUndelimitedContent ) }</RawHTML>\n\t\t</div>\n\t);\n}\n\nconst MissingEdit = withDispatch( ( dispatch, { clientId, attributes } ) => {\n\tconst { replaceBlock } = dispatch( blockEditorStore );\n\treturn {\n\t\tconvertToHTML() {\n\t\t\treplaceBlock(\n\t\t\t\tclientId,\n\t\t\t\tcreateBlock( 'core/html', {\n\t\t\t\t\tcontent: attributes.originalUndelimitedContent,\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t};\n} )( MissingBlockWarning );\n\nexport default MissingEdit;\n"]}