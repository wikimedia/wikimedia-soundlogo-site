{"version":3,"sources":["@wordpress/block-library/src/post-terms/use-post-terms.js"],"names":["useEntityProp","store","coreStore","useSelect","usePostTerms","postId","postType","term","rest_base","restBase","slug","termIds","select","visible","visibility","publicly_queryable","postTerms","_isLoading","hasPostTerms","isLoading","length","getEntityRecords","isResolving","taxonomyArgs","include","context","terms"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,aAAT,EAAwBC,KAAK,IAAIC,SAAjC,QAAkD,sBAAlD;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,eAAe,SAASC,YAAT,CAAuB;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,QAAV;AAAoBC,EAAAA;AAApB,CAAvB,EAAoD;AAAA;;AAClE,QAAM;AAAEC,IAAAA,SAAS,EAAEC,QAAb;AAAuBC,IAAAA;AAAvB,MAAgCH,IAAtC;AACA,QAAM,CAAEI,OAAF,IAAcX,aAAa,CAAE,UAAF,EAAcM,QAAd,EAAwBG,QAAxB,EAAkCJ,MAAlC,CAAjC;AACA,SAAOF,SAAS,CACbS,MAAF,IAAc;AAAA;;AACb,UAAMC,OAAO,GAAGN,IAAH,aAAGA,IAAH,2CAAGA,IAAI,CAAEO,UAAT,qDAAG,iBAAkBC,kBAAlC;;AACA,QAAK,CAAEF,OAAP,EAAiB;AAChB,aAAO;AACNG,QAAAA,SAAS,EAAE,EADL;AAENC,QAAAA,UAAU,EAAE,KAFN;AAGNC,QAAAA,YAAY,EAAE;AAHR,OAAP;AAKA;;AACD,QAAK,CAAEP,OAAP,EAAiB;AAChB;AACA,aAAO;AAAEQ,QAAAA,SAAS,EAAE;AAAb,OAAP;AACA;;AACD,QAAK,CAAER,OAAO,CAACS,MAAf,EAAwB;AACvB,aAAO;AAAED,QAAAA,SAAS,EAAE;AAAb,OAAP;AACA;;AACD,UAAM;AAAEE,MAAAA,gBAAF;AAAoBC,MAAAA;AAApB,QAAoCV,MAAM,CAAEV,SAAF,CAAhD;AACA,UAAMqB,YAAY,GAAG,CACpB,UADoB,EAEpBb,IAFoB,EAGpB;AACCc,MAAAA,OAAO,EAAEb,OADV;AAECc,MAAAA,OAAO,EAAE;AAFV,KAHoB,CAArB;AAQA,UAAMC,KAAK,GAAGL,gBAAgB,CAAE,GAAGE,YAAL,CAA9B;;AACA,UAAMN,UAAU,GAAGK,WAAW,CAAE,kBAAF,EAAsBC,YAAtB,CAA9B;;AACA,WAAO;AACNP,MAAAA,SAAS,EAAEU,KADL;AAENP,MAAAA,SAAS,EAAEF,UAFL;AAGNC,MAAAA,YAAY,EAAE,CAAC,EAAEQ,KAAF,aAAEA,KAAF,eAAEA,KAAK,CAAEN,MAAT;AAHT,KAAP;AAKA,GAjCc,EAkCf,CAAET,OAAF,EAAWJ,IAAX,aAAWA,IAAX,4CAAWA,IAAI,CAAEO,UAAjB,sDAAW,kBAAkBC,kBAA7B,CAlCe,CAAhB;AAoCA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\n\nexport default function usePostTerms( { postId, postType, term } ) {\n\tconst { rest_base: restBase, slug } = term;\n\tconst [ termIds ] = useEntityProp( 'postType', postType, restBase, postId );\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst visible = term?.visibility?.publicly_queryable;\n\t\t\tif ( ! visible ) {\n\t\t\t\treturn {\n\t\t\t\t\tpostTerms: [],\n\t\t\t\t\t_isLoading: false,\n\t\t\t\t\thasPostTerms: false,\n\t\t\t\t};\n\t\t\t}\n\t\t\tif ( ! termIds ) {\n\t\t\t\t// Waiting for post terms to be fetched.\n\t\t\t\treturn { isLoading: true };\n\t\t\t}\n\t\t\tif ( ! termIds.length ) {\n\t\t\t\treturn { isLoading: false };\n\t\t\t}\n\t\t\tconst { getEntityRecords, isResolving } = select( coreStore );\n\t\t\tconst taxonomyArgs = [\n\t\t\t\t'taxonomy',\n\t\t\t\tslug,\n\t\t\t\t{\n\t\t\t\t\tinclude: termIds,\n\t\t\t\t\tcontext: 'view',\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst terms = getEntityRecords( ...taxonomyArgs );\n\t\t\tconst _isLoading = isResolving( 'getEntityRecords', taxonomyArgs );\n\t\t\treturn {\n\t\t\t\tpostTerms: terms,\n\t\t\t\tisLoading: _isLoading,\n\t\t\t\thasPostTerms: !! terms?.length,\n\t\t\t};\n\t\t},\n\t\t[ termIds, term?.visibility?.publicly_queryable ]\n\t);\n}\n"]}