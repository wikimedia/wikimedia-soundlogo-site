{"version":3,"sources":["@wordpress/block-library/src/navigation/placeholder.js"],"names":["createBlock","Placeholder","Button","DropdownMenu","MenuGroup","MenuItem","Spinner","forwardRef","useCallback","useState","useEffect","__","navigation","chevronDown","Icon","useNavigationEntities","PlaceholderPreview","menuItemsToBlocks","NavigationPlaceholder","onCreate","ref","selectedMenu","setSelectedMenu","isCreatingFromMenu","setIsCreatingFromMenu","isResolvingPages","menus","isResolvingMenus","menuItems","hasResolvedMenuItems","hasPages","hasMenus","isLoading","createFromMenu","innerBlocks","blocks","selectNavigationBlock","onCreateFromMenu","onCreateEmptyMenu","onCreateAllPages","block","toggleProps","variant","className","onClose","map","menu","id","name","undefined"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tPlaceholder,\n\tButton,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n\tSpinner,\n} from '@wordpress/components';\n\nimport {\n\tforwardRef,\n\tuseCallback,\n\tuseState,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { navigation, chevronDown, Icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useNavigationEntities from './use-navigation-entities';\nimport PlaceholderPreview from './placeholder-preview';\nimport menuItemsToBlocks from './menu-items-to-blocks';\n\nfunction NavigationPlaceholder( { onCreate }, ref ) {\n\tconst [ selectedMenu, setSelectedMenu ] = useState();\n\n\tconst [ isCreatingFromMenu, setIsCreatingFromMenu ] = useState( false );\n\n\tconst {\n\t\tisResolvingPages,\n\t\tmenus,\n\t\tisResolvingMenus,\n\t\tmenuItems,\n\t\thasResolvedMenuItems,\n\t\thasPages,\n\t\thasMenus,\n\t} = useNavigationEntities( selectedMenu );\n\n\tconst isLoading = isResolvingPages || isResolvingMenus;\n\n\tconst createFromMenu = useCallback( () => {\n\t\tconst { innerBlocks: blocks } = menuItemsToBlocks( menuItems );\n\t\tconst selectNavigationBlock = true;\n\t\tonCreate( blocks, selectNavigationBlock );\n\t}, [ menuItems, menuItemsToBlocks, onCreate ] );\n\n\tconst onCreateFromMenu = () => {\n\t\t// If we have menu items, create the block right away.\n\t\tif ( hasResolvedMenuItems ) {\n\t\t\tcreateFromMenu();\n\t\t\treturn;\n\t\t}\n\n\t\t// Otherwise, create the block when resolution finishes.\n\t\tsetIsCreatingFromMenu( true );\n\t};\n\n\tconst onCreateEmptyMenu = () => {\n\t\tonCreate( [] );\n\t};\n\n\tconst onCreateAllPages = () => {\n\t\tconst block = [ createBlock( 'core/page-list' ) ];\n\t\tconst selectNavigationBlock = true;\n\t\tonCreate( block, selectNavigationBlock );\n\t};\n\n\tuseEffect( () => {\n\t\t// If the user selected a menu but we had to wait for menu items to\n\t\t// finish resolving, then create the block once resolution finishes.\n\t\tif ( isCreatingFromMenu && hasResolvedMenuItems ) {\n\t\t\tcreateFromMenu();\n\t\t\tsetIsCreatingFromMenu( false );\n\t\t}\n\t}, [ isCreatingFromMenu, hasResolvedMenuItems ] );\n\n\tconst toggleProps = {\n\t\tvariant: 'primary',\n\t\tclassName: 'wp-block-navigation-placeholder__actions__dropdown',\n\t};\n\treturn (\n\t\t<Placeholder className=\"wp-block-navigation-placeholder\">\n\t\t\t<PlaceholderPreview />\n\n\t\t\t<div className=\"wp-block-navigation-placeholder__controls\">\n\t\t\t\t{ isLoading && (\n\t\t\t\t\t<div ref={ ref }>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ ! isLoading && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__actions\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"wp-block-navigation-placeholder__actions__indicator\">\n\t\t\t\t\t\t\t<Icon icon={ navigation } /> { __( 'Navigation' ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ hasMenus ? (\n\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\ttext={ __( 'Add existing menu' ) }\n\t\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\t\ttoggleProps={ toggleProps }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t{ menus.map( ( menu ) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedMenu(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmenu.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCreateFromMenu();\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={ menu.id }\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ menu.name }\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t) : undefined }\n\t\t\t\t\t\t{ hasPages ? (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={ hasMenus ? 'tertiary' : 'primary' }\n\t\t\t\t\t\t\t\tonClick={ onCreateAllPages }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Add all pages' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) : undefined }\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ onCreateEmptyMenu }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Start empty' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</Placeholder>\n\t);\n}\n\nexport default forwardRef( NavigationPlaceholder );\n"]}